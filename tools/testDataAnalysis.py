'''
Author: fujiawei0724
Date: 2022-05-21 16:56:43
LastEditors: fujiawei0724
LastEditTime: 2022-07-09 19:53:20
Description: analyze the test data in multiple metric. 
'''

import numpy as np

if __name__ == '__main__':
    output_actions =[154,230,230,154,146,154,209,191,211,20,230,20,209,230,230,230,211,211,230,230,230,230,230,20,230,230,230,32,230,41,41,124,15,230,230,146,230,20,230,54,230,41,230,230,230,20,230,202,188,230,146,230,36,154,20,230,20,41,211,41,124,201,20,230,20,191,20,146,41,230,41,230,15,230,230,230,230,230,20,41,20,230,124,230,230,191,41,230,15,230,124,191,230,20,230,209,36,13,213,230]
    output_rewards =[-1.0,0.5416830599725243,0.6317883404805088,0.42439143734387197,0.9762615813110168,0.48972816608747843,-1.0,0.479322630587203,0.5073455442662055,-1.0,0.3000496193418245,-1.0,0.5007768560230675,2.8664247964751444,6.60732713196096,-1.0,-1.0,0.5112723763187524,1.2224710561640089,1.5915348414715804,0.9806233198212159,-1.0,-1.0,0.6500812649237551,0.8262795937043198,2.0750755816606175,0.9997088115863831,0.3614274780510367,-1.0,-1.0,-1.0,-1.0,-1.0,1.1604002539816762,0.8669652003961444,2.3252480907604305,1.6341976012011976,0.6573253843604131,0.7475237228571971,-1.0,0.6046205980212365,0.36835197880903836,2.977028294244025,2.575936173558644,17.72241714073882,0.20919590185260478,0.8698294736266636,-1.0,2.8117579917868545,1.7902492106453685,-1.0,2.254552796506114,0.9719902255751547,0.41987269362790586,1.1920274269255338,19.449483966694586,-1.0,-1.0,0.3401527905118149,0.5575604995027262,-1.0,0.4189059225966008,2.126333411291062,1.1493634289303145,0.09866845766544749,-1.0,-1.0,-1.0,0.5399874114362018,-1.0,0.11676652206599433,0.49136407477524713,0.16057792169421187,1.6494633497329592,1.2939257317442698,0.6259687360422203,1.6719456463382618,0.9390867518119533,-1.0,-1.0,0.3985888446060539,0.7979241663368619,-1.0,-1.0,-1.0,-1.0,0.3380491803761072,4.099115854268357,0.4630377028330841,-1.0,-1.0,0.41664939879593565,-1.0,0.2456731268816067,2.090734943503513,1.3081763615436413,0.3040633156154854,0.36463615395344456,0.4417687441321631,1.9027968955418484]
    ouput_actions_candidates =[[[154,164,41,208,202,15,183,190,137,57,34,206,160,95,
53,72]],[[230,188,209,125,208,221,104,83,192,146,213,187,41,162,
199,186]],[[230,209,213,190,211,146,188,125,154,169,225,171,208,221,
192,135]],[[154,190,213,208,41,211,146,171,230,192,135,169,225,209,
36,164]],[[146,20,41,209,62,167,104,83,188,230,124,202,15,57,
125,181]],[[154,164,41,190,53,34,160,208,137,26,45,55,95,15,
72,11]],[[209,188,146,230,125,62,41,83,20,104,167,213,208,211,
190,154]],[[191,210,195,230,176,147,203,174,168,226,224,214,212,222,
216,178]],[[211,213,154,190,230,225,171,208,221,192,164,160,169,227,
194,85]],[[20,41,62,146,83,104,167,209,188,54,18,16,15,52,
56,191]],[[230,20,209,62,146,41,167,188,125,83,104,190,134,183,
154,176]],[[20,62,191,188,146,104,176,209,42,44,147,210,25,54,
230,128]],[[209,20,146,41,62,83,167,104,230,188,125,191,54,102,
65,123]],[[230,209,188,125,221,210,189,199,146,208,211,213,228,226,
186,225]],[[230,209,188,125,213,146,211,221,190,169,225,208,217,194,
192,135]],[[230,209,188,146,125,213,208,211,221,225,190,192,169,171,
154,185]],[[211,190,213,154,215,225,171,164,221,160,227,192,208,152,
194,230]],[[211,213,190,230,154,215,225,171,221,208,194,169,209,192,
227,164]],[[230,209,20,146,62,167,41,188,125,83,104,190,154,134,
85,176]],[[230,188,209,210,125,191,146,195,176,189,174,203,226,167,
199,170]],[[230,41,146,154,190,213,36,135,24,43,91,20,45,171,
209,53]],[[230,209,188,125,221,211,208,213,225,229,217,223,171,189,
199,210]],[[230,209,188,146,125,167,104,62,83,20,41,85,190,213,
64,127]],[[20,62,209,230,146,41,167,188,83,125,104,190,176,134,
102,184]],[[230,209,20,146,62,41,167,83,188,125,104,134,176,199,
119,226]],[[230,213,211,209,190,221,188,169,225,208,215,217,171,194,
154,192]],[[230,221,208,209,210,199,188,186,213,189,229,226,228,211,
195,201]],[[32,15,53,36,20,57,34,13,40,5,76,47,3,51,97,26]],[[230,209,188,213,125,146,190,211,169,225,135,221,208,171,
154,194]],[[41,146,20,209,124,202,83,167,208,102,104,62,172,15,
169,181]],[[41,20,146,209,62,83,124,123,167,102,104,54,202,169,
224,15]],[[124,172,202,123,121,102,119,224,169,226,199,184,131,207,
70,15]],[[15,32,57,70,5,34,95,36,55,47,208,97,13,124,
112,38]],[[230,209,213,211,190,188,146,125,221,225,169,208,215,171,
154,194]],[[230,209,20,146,62,167,41,188,125,83,104,134,176,191,
199,178]],[[146,188,213,209,190,36,208,43,125,97,211,230,154,40,
169,62]],[[230,191,210,195,189,209,174,203,149,147,188,214,176,226,
218,170]],[[20,230,209,62,41,146,167,83,188,125,104,134,183,190,
184,176]],[[230,209,146,167,20,62,188,125,41,83,104,134,191,176,
190,178]],[[54,15,32,18,52,12,58,47,70,13,5,57,112,95,
34,16]],[[230,213,211,190,209,225,154,171,221,169,194,192,135,215,
208,188]],[[41,146,20,209,167,83,121,172,202,62,124,104,119,184,
199,230]],[[230,209,188,146,167,125,62,104,20,83,41,85,190,191,
79,26]],[[230,209,188,125,146,167,221,211,213,208,210,189,225,199,
228,217]],[[230,209,188,146,125,167,104,62,83,20,41,85,79,149,
176,203]],[[20,41,62,83,146,36,15,104,53,32,57,13,11,34,
51,40]],[[230,41,146,209,20,190,154,36,62,213,125,53,104,43,
45,83]],[[202,124,70,172,121,208,15,184,102,199,57,131,119,123,
206,89]],[[188,230,209,199,208,189,210,221,186,125,168,222,195,203,
226,170]],[[230,213,211,209,221,188,190,225,169,215,217,208,194,171,
125,219]],[[146,62,104,54,191,188,209,20,52,230,21,46,115,16,
63,83]],[[230,213,209,211,190,188,225,221,169,215,217,194,171,208,
125,192]],[[36,53,40,15,32,57,97,20,43,51,208,26,13,34,
112,47]],[[154,190,213,211,230,171,164,225,208,160,135,192,169,221,
215,227]],[[20,230,209,62,41,146,167,83,188,125,104,134,190,183,
176,184]],[[230,209,146,188,167,125,62,104,20,83,41,85,79,191,
176,190]],[[20,41,62,209,146,83,167,104,188,230,125,18,54,102,
44,52]],[[41,36,57,15,20,146,11,53,34,45,76,49,202,32,
43,1]],[[211,154,190,213,215,164,225,171,160,227,221,208,152,192,
194,135]],[[41,36,20,146,43,53,45,24,40,51,26,57,11,13,
49,30]],[[124,41,202,146,15,102,209,208,20,169,131,57,204,172,
181,183]],[[201,199,186,226,221,224,195,208,210,168,220,203,228,214,
230,209]],[[20,230,209,62,146,167,41,188,83,125,104,190,39,191,
85,154]],[[230,191,210,209,189,188,174,195,149,203,147,218,146,214,
176,193]],[[20,13,15,36,32,41,5,11,40,57,30,26,49,28,17,34]],[[191,210,195,168,203,147,199,174,128,226,222,176,94,224,
130,216]],[[20,62,41,83,104,146,209,188,167,54,125,44,18,42,
94,35]],[[146,41,20,15,104,57,62,13,102,83,32,191,152,124,
167,190]],[[41,146,20,62,36,53,230,104,45,24,83,43,209,26,
11,40]],[[230,191,210,209,188,147,195,174,176,146,203,149,226,128,
153,168]],[[41,20,146,62,83,36,15,53,11,45,57,43,32,13,
40,49]],[[230,209,20,146,167,62,41,188,83,125,104,134,183,190,
176,199]],[[15,32,36,57,95,20,13,47,41,34,211,112,53,70,
26,68]],[[230,209,146,188,213,125,190,211,167,41,154,225,62,171,
194,215]],[[230,211,213,190,209,225,154,221,171,215,169,194,208,192,
135,217]],[[230,209,20,146,167,62,41,188,125,83,104,134,190,183,
154,176]],[[230,213,211,209,190,221,225,215,169,208,217,194,171,188,
219,192]],[[230,209,146,188,167,62,125,20,104,41,83,191,85,176,
26,39]],[[20,41,146,62,209,83,167,104,188,125,230,199,124,184,
102,226]],[[41,20,146,62,83,209,104,167,102,54,123,188,18,124,
224,191]],[[20,62,41,146,209,83,104,167,230,188,125,54,52,16,
18,42]],[[230,209,188,125,210,189,221,199,208,211,228,146,213,226,
186,195]],[[124,15,202,70,95,169,131,208,32,112,206,57,47,55,
145,181]],[[230,209,146,20,62,167,83,41,188,104,125,191,189,210,
147,174]],[[230,213,211,209,190,169,221,188,225,208,215,171,217,194,
135,196]],[[191,210,230,195,147,176,174,203,168,209,188,226,224,214,
212,216]],[[41,20,146,62,209,83,167,104,230,188,125,124,199,184,
121,202]],[[230,210,191,189,195,174,149,209,203,188,147,199,218,226,
170,176]],[[15,124,57,208,102,32,202,131,47,13,169,41,55,34,
70,152]],[[230,191,210,195,189,149,174,147,153,126,176,216,188,128,
146,203]],[[124,202,169,131,204,208,152,15,102,181,172,41,183,209,
146,145]],[[191,210,230,188,176,209,147,195,146,168,174,104,226,128,
203,224]],[[230,188,189,209,210,199,195,203,222,174,125,191,168,216,
186,176]],[[20,41,209,146,62,167,83,230,188,104,125,124,202,102,
208,183]],[[230,209,188,125,146,213,211,221,190,225,169,167,217,208,
215,194]],[[209,146,41,20,62,230,188,83,125,104,167,36,208,53,
154,43]],[[36,53,41,15,45,32,11,34,26,51,30,57,43,40,5,13]],[[13,15,36,32,5,11,40,57,30,34,26,20,17,43,49,28]],[[213,211,230,190,221,209,225,215,169,208,171,217,194,154,
219,192]],[[230,209,188,208,125,221,146,83,213,211,225,192,41,171,
187,173]]]
    best_actions =[0,230,209,230,173,230,41,230,230,0,230,230,230,230,209,104,230,230,230,230,146,0,0,188,230,230,230,62,5,0,0,41,0,230,230,167,230,20,230,0,230,62,230,230,167,146,167,0,230,230,83,230,104,230,209,209,167,0,230,196,0,230,104,209,41,0,0,0,62,125,85,230,20,230,230,230,230,209,16,230,209,215,0,0,0,0,20,230,230,0,0,230,104,230,230,148,167,41,230,230]
    best_rewards =[-1.0,0.5416830599725243,0.6317883404805088,0.5592602035285945,1.1241626276689858,0.7642943180453688,0.2805472325450265,0.7173719881736411,0.8321242441009483,-1.0,0.3000496193418245,0.42810338662455,0.5024625105492871,2.8664247964751444,6.60732713196096,0.26791254707444734,0.641331206355274,0.8226525374744901,1.2224710561640089,1.5915348414715804,0.9873495435310518,-1.0,-1.0,0.8770755844298136,0.8262795937043198,2.0750755816606175,0.9997088115863831,0.4288619553779031,0.23207847504087353,-1.0,-1.0,2.9300636454622997,-1.0,1.1604002539816762,0.8669652003961444,2.3760730626157436,1.6341976012011976,0.6573253843604131,0.7475237228571971,-1.0,0.6046205980212365,0.3834879497327258,2.977028294244025,2.575936173558644,17.72241714073882,0.28153047945500664,0.8698294736266636,-1.0,4.376903744573784,1.7902492106453685,1.7961880212646653,2.254552796506114,3.64223984289357,0.5291012262131145,4.550962509433111,19.449483966694586,0.36113464317925886,-1.0,0.5585031472034027,0.7953755401617318,-1.0,0.5427186494265751,7.854708550161051,1.1493634289303145,0.10178724700840129,-1.0,-1.0,-1.0,0.5422681000499581,0.8377896984426989,0.1653659001786978,0.49136407477524713,0.16870501174377578,1.6494633497329592,1.2939257317442698,0.6259687360422203,1.6719456463382618,0.9390867518119533,0.1154343202559898,1.012293721515894,0.6425011551386223,0.8949575898031581,-1.0,-1.0,-1.0,-1.0,0.3380491803761072,4.099115854268357,1.0735980479887135,-1.0,-1.0,0.6648126661739525,0.4033935112864795,0.3858215080882379,2.090734943503513,1.9744432821500615,0.37805685557773533,0.49252894801331176,1.2312538054545024,1.9027968955418484]
    for candi_size in [2, 5, 8, 10, 16]:
        valid_case_num = 0
        match_case_num = 0
        unmatched_best_actions = []
        unmatched_best_actions_candidates = []
        for i in range(0, 100):
            if best_rewards[i] < 0.0:
                continue
            valid_case_num += 1
            if best_actions[i] in ouput_actions_candidates[i][0][:candi_size]:
                match_case_num += 1
            else:
                unmatched_best_actions.append(best_actions[i])
                unmatched_best_actions_candidates.append(ouput_actions_candidates[i][0][:candi_size])
        print('Candidate size: {}, success rate: {}'.format(candi_size, match_case_num / valid_case_num))
        print('Valid case num: {}, match case num: {}'.format(valid_case_num, match_case_num))
        print('Unmatched best actions: {}'.format(unmatched_best_actions))
        print('Unmatched best actions candidates: {}'.format(unmatched_best_actions_candidates))

