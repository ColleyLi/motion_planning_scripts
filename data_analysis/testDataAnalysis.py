'''
Author: fujiawei0724
Date: 2022-05-21 16:56:43
LastEditors: fujiawei0724
LastEditTime: 2022-05-21 17:06:38
Description: analyze the test data in multiple metric. 
'''

import numpy as np

if __name__ == '__main__':
    output_actions =[230,230,230,230,230,230,230,230,230,230,230,230,230,230,230,230,230,230,230,230,230,230,230,230,230,230,230,230,230,230,230,230,230,230,230,230,230,230,230,230,230,230,230,230,230,230,230,230,230,230,230,230,230,230,230,230,230,230,230,230,230,230,230,230,230,230,230,230,230,230,230,230,230,230,230,230,230,230,230,230,230,230,230,230,230,230,230,230,230,230,230,230,230,230,230,230,230,230,230,230]
    output_rewards =[2.3483820772696844,3.3354925514151392,0.9515137596054069,1.1520619400402852,0.7904918767654501,0.5953375521379359,-1.0,0.6798234060988958,0.793144294608006,0.25604170891235345,0.44303679770940163,2.2577583813729225,0.5960581743027924,-1.0,1.7243284691170768,0.8107430051828158,-1.0,1.875440048927182,0.554197404146604,0.8866664237266695,0.7459889467431802,0.124397310308084,3.9296346621464635,0.6617591009336549,0.6115787344177096,0.6719619181720206,0.286996668541247,3.1369344887012374,1.580273846053166,0.8629665897317172,0.725202398138127,-1.0,0.7794784333683487,3.1891089841624956,-1.0,2.257390803371209,-1.0,-1.0,0.4708802415040736,2.775349533934441,1.1947377913023598,0.9982991398829028,0.43152380153086256,0.2749806018230643,0.6012528639939649,0.4706596055582544,0.48694759077142696,1.0175285215983434,1.1572121157368913,0.9517486603898551,0.165343707650169,-1.0,1.3012461350757107,1.080484858885824,0.654340840949298,-1.0,-1.0,0.2253720899154525,4.154805308379573,8.375351354619655,-1.0,0.8417421327020863,0.09584913219866939,0.17725474457720006,-1.0,0.5351566222286296,1.0643106396593736,-1.0,2.6268135013045186,3.9948149966579716,1.2067392653717208,-1.0,0.5731477602601516,0.5545804652301828,2.241774332491256,-1.0,-1.0,-1.0,8.310426606808951,1.016209866655283,0.5626246864339118,-1.0,-1.0,0.39677923428497497,0.3195948392268003,0.6867077267361904,1.1077717164034906,0.5999078021437245,0.6663207799327806,0.9559667383702659,-1.0,0.3077796402345905,-1.0,-1.0,0.7338941630211179,1.6645296866983994,-1.0,0.12369707246153695,0.4083672678886162,1.0588234184033831]
    ouput_actions_candidates =[[[230,188,209,184,216,228,83,62,162,222,203,219,113,186,
132,156]],[[230,125,188,62,167,209,20,41,146,104,83,77,212,141,
10,105]],[[230,228,188,209,205,216,184,201,207,125,134,226,212,117,
94,220]],[[230,209,188,184,216,228,222,226,186,83,113,132,205,62,
203,176]],[[230,171,34,160,227,55,135,74,196,173,223,185,190,141,
143,19]],[[230,188,125,184,228,212,207,117,205,94,201,10,92,146,
134,224]],[[230,125,167,188,62,209,146,41,20,104,83,141,10,77,
212,16]],[[230,171,34,160,227,55,74,141,223,135,143,190,185,196,
173,19]],[[230,125,188,62,167,209,20,41,146,104,83,77,212,141,
10,105]],[[230,125,62,188,20,41,167,209,146,104,83,52,29,212,
105,77]],[[230,125,188,62,167,20,209,41,146,104,83,141,77,212,
137,10]],[[230,209,188,184,83,216,162,228,62,222,154,203,219,156,
215,186]],[[230,171,227,55,160,34,74,185,143,141,190,135,173,85,
19,192]],[[230,188,20,186,132,83,52,48,23,222,123,228,37,56,
125,219]],[[230,188,184,228,125,212,207,205,94,117,10,201,216,134,
92,123]],[[230,171,34,160,26,227,146,95,152,223,196,175,177,194,
135,19]],[[230,171,34,160,26,146,28,227,95,177,194,152,62,175,
196,36]],[[230,171,160,55,135,34,227,209,177,223,173,185,152,95,
143,19]],[[230,188,209,83,222,219,184,125,216,154,226,162,113,104,
223,132]],[[230,188,209,184,83,216,228,219,222,162,154,62,203,156,
215,225]],[[230,188,228,125,209,184,117,207,216,226,205,212,201,220,
134,193]],[[230,188,125,20,41,62,146,167,83,209,212,207,10,184,
52,117]],[[230,188,228,209,216,201,205,184,125,134,207,220,151,212,
94,226]],[[230,188,209,83,222,184,216,219,113,226,132,228,62,125,
186,182]],[[230,188,228,184,205,207,125,212,94,134,209,216,201,117,
224,220]],[[230,188,209,83,219,184,226,222,216,223,154,132,113,125,
162,156]],[[230,188,228,184,212,207,205,117,125,94,10,134,92,216,
209,224]],[[230,171,209,160,135,55,177,173,152,34,185,95,19,227,
223,85]],[[230,125,188,167,62,209,41,146,20,104,83,141,77,10,
212,137]],[[230,167,125,188,62,209,146,41,20,104,83,141,10,212,
77,16]],[[230,171,34,160,227,26,223,196,19,55,175,173,74,143,
135,152]],[[230,125,188,62,167,209,20,41,146,104,83,10,77,212,
207,105]],[[230,167,125,188,62,209,146,41,20,104,83,141,10,212,
77,16]],[[230,188,209,184,83,228,216,222,219,162,62,132,186,203,
226,215]],[[230,20,41,125,62,146,188,28,9,115,87,156,52,5,
132,83]],[[230,171,160,34,209,26,95,177,55,135,152,146,227,15,
36,173]],[[230,188,209,186,184,132,228,222,216,203,113,88,169,37,
205,29]],[[230,20,125,62,188,41,167,146,209,83,104,5,52,194,
30,114]],[[230,171,34,160,227,223,26,19,196,135,55,173,175,74,
152,143]],[[230,188,201,228,184,125,205,209,207,216,134,212,94,224,
151,182]],[[230,171,34,160,227,26,223,19,196,175,173,135,74,55,
152,72]],[[230,188,209,83,125,104,62,226,154,182,216,167,222,184,
186,162]],[[230,188,186,132,83,228,56,125,92,182,224,216,222,184,
209,151]],[[230,188,125,20,146,41,62,212,167,209,83,10,207,184,
12,201]],[[230,171,34,160,26,227,95,196,146,223,152,175,177,19,
28,135]],[[230,34,171,188,62,160,146,227,26,223,175,196,167,209,
93,152]],[[230,171,34,160,227,26,223,196,175,146,19,95,93,152,
143,194]],[[230,188,209,83,219,186,184,132,113,228,216,222,62,223,
226,203]],[[230,188,228,125,184,117,212,207,205,226,134,146,10,209,
216,220]],[[230,188,125,228,117,212,184,209,207,216,146,226,134,193,
205,220]],[[230,125,188,62,167,20,41,146,209,83,104,77,212,105,
228,141]],[[230,188,125,167,146,209,41,83,212,117,20,228,184,226,
62,10]],[[230,188,125,167,62,209,41,146,104,20,83,141,212,10,
77,16]],[[230,188,209,184,83,216,228,222,62,113,219,186,132,162,
203,226]],[[230,125,188,62,167,20,41,209,146,104,83,77,141,212,
105,228]],[[230,188,125,20,41,62,146,167,83,212,209,207,12,184,
10,201]],[[230,188,125,212,184,207,146,20,201,228,10,12,117,94,
209,83]],[[230,125,188,62,20,167,41,146,209,83,104,77,212,105,
141,52]],[[230,209,188,228,205,216,184,201,134,125,207,220,151,226,
182,94]],[[230,188,228,209,205,184,201,216,125,134,207,94,212,220,
151,182]],[[230,62,41,146,125,20,188,34,171,28,209,26,194,160,
177,196]],[[230,188,125,20,41,146,212,184,167,207,83,228,117,62,
10,52]],[[230,20,62,125,41,188,146,167,104,209,83,5,115,114,
52,194]],[[230,62,34,41,146,171,125,28,20,160,26,188,194,95,
177,175]],[[230,171,160,34,227,177,26,146,95,152,135,55,15,36,
173,209]],[[230,171,34,160,227,26,223,55,196,135,19,95,173,177,
146,152]],[[230,188,83,209,215,154,104,200,219,162,156,181,225,196,
223,85]],[[230,188,209,184,228,186,132,216,222,113,203,83,62,88,
219,162]],[[230,209,188,184,216,228,83,222,162,62,203,186,113,132,
219,154]],[[230,125,188,62,167,209,20,41,146,104,83,141,77,10,
212,137]],[[230,125,188,62,167,20,209,41,146,104,83,141,137,77,
212,105]],[[230,125,62,188,20,41,167,146,209,83,104,52,212,29,
77,105]],[[230,125,188,62,167,209,20,41,146,104,83,141,77,212,
137,10]],[[230,167,188,209,125,104,83,146,62,41,226,20,111,214,
220,228]],[[230,171,209,160,55,135,173,185,177,85,152,200,188,141,
223,192]],[[230,167,62,209,188,125,146,171,104,41,83,141,20,34,
175,143]],[[230,125,188,167,62,209,20,146,41,83,104,212,10,56,
77,207]],[[230,188,132,186,228,209,222,184,156,219,215,203,113,169,
225,162]],[[230,171,34,160,26,227,95,146,152,196,223,177,175,135,
28,36]],[[230,209,188,167,125,62,83,146,104,216,41,226,228,186,
220,184]],[[230,228,188,184,205,212,207,94,117,134,216,125,209,226,
10,220]],[[230,125,20,188,62,41,146,167,209,83,212,207,12,52,
29,184]],[[230,188,132,186,228,222,156,184,169,219,113,52,209,37,
203,29]],[[230,125,188,167,62,209,20,41,146,104,83,141,77,212,
10,16]],[[230,188,228,184,207,125,212,205,94,201,134,216,117,209,
224,10]],[[230,125,188,167,62,209,20,41,146,104,83,141,77,212,
10,16]],[[230,209,62,167,188,125,146,171,104,41,141,83,20,175,
229,34]],[[230,188,228,125,184,212,207,205,117,94,134,201,10,216,
209,224]],[[230,171,34,160,26,227,95,223,146,135,196,152,19,175,
173,177]],[[230,171,160,55,34,209,188,227,135,143,141,173,196,95,
223,85]],[[230,188,125,167,146,41,209,20,212,83,184,117,62,10,
228,207]],[[230,125,62,188,20,41,167,209,146,104,83,52,114,137,
29,141]],[[230,125,188,20,62,41,146,167,209,83,212,207,104,52,
29,12]],[[230,125,188,62,20,167,209,41,146,104,83,141,137,77,
114,52]],[[230,167,62,209,188,125,146,104,41,83,20,141,171,158,
175,34]],[[230,209,188,83,184,216,162,62,228,222,154,215,156,219,
125,203]],[[230,171,34,160,227,26,196,223,55,74,173,135,95,19,
190,143]],[[230,125,62,188,20,41,167,209,146,104,83,52,114,29,
137,212]],[[230,125,188,62,20,41,167,146,209,104,83,77,212,105,
52,141]],[[230,188,209,83,219,184,223,154,228,222,162,186,156,225,
215,132]]]
    best_actions =[230,230,230,230,230,209,0,230,188,20,230,230,230,0,62,62,83,230,230,213,230,147,230,230,230,230,210,230,230,230,230,0,230,230,0,167,22,41,230,167,230,230,230,104,230,125,83,230,230,230,230,0,230,230,230,18,0,20,230,230,0,188,20,7,104,230,230,83,230,230,41,41,230,230,230,0,0,83,209,230,193,0,20,230,188,230,230,230,230,230,0,20,0,62,230,230,211,20,
167,230]
    best_rewards =[2.3483820772696844,3.3354925514151392,0.9515137596054069,1.1520619400402852,0.7904918767654501,0.5953375521379359,-1.0,0.6798234060988958,0.793144294608006,0.25604170891235345,0.44303679770940163,2.2577583813729225,0.5960581743027924,-1.0,1.7307675912376617,0.8415977774957043,7.265383586782936,1.875440048927182,0.554197404146604,0.9450286432155323,0.7459889467431802,0.13399785930332742,3.9296346621464635,0.6617591009336549,0.6115787344177096,0.6719619181720206,0.410097952655122,3.1369344887012374,1.580273846053166,0.8629665897317172,0.725202398138127,-1.0,0.7794784333683487,3.1891089841624956,-1.0,2.257390803371209,2.728723453444489,0.4754825010369735,0.4708802415040736,2.775349533934441,1.1947377913023598,0.9982991398829028,0.43152380153086256,0.2749806018230643,0.6012528639939649,0.4706596055582544,0.48703149743079505,1.0175285215983434,1.1572121157368913,0.9517486603898551,0.165343707650169,-1.0,1.3012461350757107,1.080484858885824,0.654340840949298,0.20972765675468114,-1.0,0.2253720899154525,4.154805308379573,8.375351354619655,-1.0,0.8417421327020863,0.09584913219866939,0.19577846218415326,0.45059293424761326,0.5351566222286296,1.0643106396593736,0.48134461139730805,2.6268135013045186,3.9948149966579716,1.2473877736846384,0.3471510660264196,0.5731477602601516,0.5545804652301828,2.241774332491256,-1.0,-1.0,0.8742444864467381,8.310426606808951,1.016209866655283,0.5643718673543331,-1.0,0.1403204167978289,0.39677923428497497,0.3195948392268003,0.6867077267361904,1.1077717164034906,0.5999078021437245,0.6663207799327806,0.9559667383702659,-1.0,0.3077796402345905,-1.0,3.1780895949708157,0.7338941630211179,1.6645296866983994,0.6986701914253391,0.12369707246153695,0.4083672678886162,1.0588234184033831]

    for candi_size in [16]:
        valid_case_num = 0
        match_case_num = 0
        unmatched_best_actions = []
        unmatched_best_actions_candidates = []
        for i in range(0, 100):
            if best_rewards[i] < 0.0:
                continue
            valid_case_num += 1
            if best_actions[i] in ouput_actions_candidates[i][0][:candi_size]:
                match_case_num += 1
            else:
                unmatched_best_actions.append(best_actions[i])
                unmatched_best_actions_candidates.append(ouput_actions_candidates[i][0][:candi_size])
        print('Candidate size: {}, success rate: {}'.format(candi_size, match_case_num / valid_case_num))
        print('Valid case num: {}, match case num: {}'.format(valid_case_num, match_case_num))
        print('Unmatched best actions: {}'.format(unmatched_best_actions))
        print('Unmatched best actions candidates: {}'.format(unmatched_best_actions_candidates))

