'''
Author: fujiawei0724
Date: 2022-05-21 16:56:43
LastEditors: fujiawei0724
LastEditTime: 2022-06-16 11:27:48
Description: analyze the test data in multiple metric. 
'''

import numpy as np

if __name__ == '__main__':
    output_actions =[230,188,188,167,230,230,167,167,41,230,177,198,62,53,188,62,62,167,188,62,1,167,188,188,177,188,166,167,230,188,230,230,13,167,188,188,1,193,167,188,39,188,13,167,230,53,230,167,188,167,20,230,188,188,230,230,230,13,226,62,226,230,230,13,193,188,13,188,167,165,62,230,167,230,167,167,188,188,230,188,167,230,13,230,188,10,230,177,188,188,39,167,188,230,167,230,62,228,188,10]
    output_rewards =[1.4385399383106103,2.656929253447819,0.7532692611414541,2.178017529275365,1.3537912250861024,2.1571755233262477,0.533153196075285,1.037081724576752,-1.0,6.192409210852265,0.5131327469897979,0.7524108353010439,0.4637550902236086,0.0673378442682731,0.8482386149095479,0.1817406108793624,1.045898011471077,1.12980846133208,0.6772836857890105,-1.0,0.14892209254416908,-1.0,4.43347453692368,1.456128859652672,-1.0,-1.0,-1.0,1.1934501273823965,2.1175069841522665,0.6082989657339786,1.0389513697364796,2.9907273881311203,-1.0,0.6525058845829981,4.584832935262262,1.5487017187730554,0.2742040450957397,0.39884596667167427,-1.0,0.9017663087052182,0.29534535025615055,-1.0,0.18510969455773468,1.150849724220465,0.6883764025667438,0.09513905055508597,3.097957725190257,0.5824499843555219,0.46343766389767777,0.9743171748284023,-1.0,0.9041123085338352,0.5309580232585827,0.7470856216057051,0.9664344456170744,1.4791459210242799,0.8532195033843057,-1.0,0.5260378834516909,1.2997342074309932,-1.0,1.2466136135463015,1.2314786863420493,-1.0,-1.0,1.3067778330344189,-1.0,1.323035015869514,1.3031759797241285,0.3716252098326583,-1.0,4.489080052313924,0.9713645678008234,1.60287051030603,-1.0,0.9966900089972384,-1.0,0.387626895104769,0.8348304070861922,0.5644469037900447,1.35606888286251,0.5125482452445277,-1.0,0.9798438448796535,1.1871045466975787,-1.0,0.4627415564530517,0.7860702404414495,-1.0,0.5927988662479672,0.7862952298254301,-1.0,0.5842696849296342,1.1717367304437285,1.6242445439113014,6.932496561696265,-1.0,-1.0,0.5660651294903213,0.4319019921702063]
    ouput_actions_candidates =[[[230,188,209,167,146,125,165,166,229,189,224,192,208,193,
187,225]],[[188,230,167,169,171,194,166,146,211,192,225,135,209,202,
221,141]],[[188,167,230,166,194,146,169,209,192,125,171,187,221,225,
217,215]],[[167,209,230,41,104,184,188,151,121,203,86,195,10,39,
161,128]],[[230,188,209,167,146,125,165,166,192,229,208,202,194,187,
189,162]],[[230,188,209,167,125,146,166,165,192,229,202,208,189,225,
224,187]],[[167,188,230,128,203,209,184,104,216,195,226,212,193,151,
125,121]],[[167,230,188,209,203,104,146,184,128,195,125,226,121,216,
161,151]],[[41,18,4,53,33,184,12,42,39,100,51,48,13,56,
111,40]],[[230,209,188,167,203,184,165,226,151,195,205,193,220,159,
146,207]],[[177,223,215,206,229,166,185,225,129,202,204,192,198,219,
213,169]],[[198,1,177,158,187,171,166,135,76,129,145,152,217,156,
116,101]],[[62,167,20,188,104,41,146,83,230,125,209,39,184,31,
35,203]],[[53,51,13,22,187,19,76,208,87,194,30,1,166,15,
93,215]],[[188,230,167,209,165,224,146,125,189,229,166,193,222,184,
151,212]],[[62,167,20,104,230,188,41,83,125,209,146,31,129,183,
145,74]],[[62,167,20,188,146,230,41,104,125,209,83,121,144,184,
178,31]],[[167,62,188,230,20,146,209,125,104,41,83,10,121,31,
184,151]],[[188,230,166,171,169,167,217,211,146,192,225,194,198,215,
177,202]],[[62,20,13,116,223,1,59,76,198,156,145,187,177,158,
175,188]],[[1,51,13,217,22,30,187,15,55,93,9,20,76,101,
5,62]],[[167,230,188,209,151,146,184,125,212,203,83,128,104,41,
161,218]],[[188,167,230,166,194,171,169,146,192,125,225,217,211,141,
198,221]],[[188,167,230,171,166,169,146,194,211,192,225,125,221,135,
209,217]],[[177,171,187,166,198,225,129,215,213,194,135,175,206,217,
116,179]],[[188,167,230,194,166,169,171,146,225,211,192,135,127,141,
187,217]],[[166,171,217,177,169,198,158,192,215,188,225,230,194,227,
221,211]],[[167,62,230,188,146,209,125,20,104,41,83,184,129,183,
100,121]],[[230,188,209,167,125,165,146,166,229,224,192,205,189,202,
226,225]],[[188,230,171,146,166,167,217,169,177,198,192,125,211,158,
225,194]],[[230,188,209,226,203,167,205,193,220,195,212,184,207,165,
147,199]],[[230,188,209,167,146,165,125,203,189,224,205,184,193,220,
226,197]],[[13,144,59,223,71,116,62,25,9,5,180,1,39,198,
156,35]],[[167,230,209,188,104,146,125,184,203,41,195,151,128,121,
161,83]],[[188,167,166,194,230,169,217,171,187,146,192,62,215,127,
213,125]],[[188,230,167,171,146,194,169,166,211,225,125,192,135,209,
202,221]],[[1,51,217,13,30,76,22,93,9,15,49,19,20,53,
166,62]],[[193,216,128,182,195,184,188,121,180,86,212,203,39,178,
149,31]],[[167,62,188,230,209,20,146,125,104,41,83,184,129,178,
180,144]],[[188,230,171,166,169,167,194,225,211,192,202,146,215,217,
198,221]],[[39,10,20,41,42,121,35,104,184,71,203,65,31,12,
33,86]],[[188,167,230,62,146,20,125,209,41,104,166,171,194,169,
135,156]],[[13,9,59,53,51,144,5,15,116,187,71,99,25,80,
1,22]],[[167,62,230,188,20,104,209,125,146,41,83,184,100,31,
129,178]],[[230,188,209,167,146,125,165,189,205,224,203,166,184,197,
193,186]],[[53,51,76,22,13,19,87,187,40,93,55,30,129,215,
1,166]],[[230,188,209,167,146,165,125,224,193,189,220,222,205,226,
203,184]],[[167,62,230,188,146,209,125,20,104,41,83,129,184,183,
211,169]],[[188,230,209,167,165,224,125,166,146,189,229,197,222,193,
208,192]],[[167,62,230,188,146,209,125,20,104,41,83,129,184,183,
211,169]],[[20,62,41,188,104,83,39,146,125,167,18,184,35,25,
230,31]],[[230,188,209,167,222,226,229,225,224,166,197,165,192,193,
205,189]],[[188,230,167,146,166,169,171,194,125,192,211,217,225,221,
177,209]],[[188,230,171,166,169,167,194,211,225,192,146,202,217,215,
198,221]],[[230,188,229,225,166,192,202,167,209,215,223,206,208,221,
204,227]],[[230,167,209,188,146,104,203,125,184,195,128,151,168,226,
161,121]],[[230,222,224,226,193,188,209,199,220,189,165,205,176,197,
212,167]],[[13,144,180,62,20,184,31,35,33,178,25,129,59,76,
116,121]],[[226,222,193,224,199,205,230,220,189,188,212,197,191,172,
165,176]],[[62,20,167,104,41,188,230,125,83,209,146,31,144,178,
134,10]],[[226,193,222,224,199,212,205,228,216,189,172,176,220,207,
191,203]],[[230,167,209,188,203,195,104,146,184,125,226,128,216,172,
151,168]],[[230,209,167,188,146,203,104,195,125,184,128,226,151,172,
216,205]],[[13,76,1,9,187,59,177,217,175,145,22,51,198,80,
116,129]],[[193,184,228,222,226,180,176,121,220,203,182,165,86,224,
212,205]],[[188,230,167,171,146,194,166,169,211,225,192,125,135,221,
217,209]],[[13,71,144,42,10,12,25,53,33,0,5,59,116,206,
29,6]],[[188,167,230,194,169,166,171,146,135,141,225,211,156,187,
217,125]],[[167,62,230,188,146,209,125,20,104,41,83,211,129,183,
169,184]],[[165,188,167,53,208,184,209,41,187,230,215,151,166,51,
189,156]],[[62,20,167,104,41,230,188,146,83,125,209,144,31,10,
5,39]],[[230,188,209,167,146,165,125,166,189,224,193,208,184,203,
229,192]],[[167,62,230,188,209,146,125,20,104,41,83,184,216,100,
29,10]],[[230,188,209,167,146,125,165,166,189,224,192,229,205,208,
193,203]],[[167,209,230,188,184,203,104,151,41,146,121,195,128,86,
161,163]],[[167,230,188,62,209,146,125,20,41,104,83,211,129,184,
1,82]],[[188,230,167,171,146,166,169,194,125,192,211,217,225,221,
198,177]],[[188,230,209,167,125,146,165,166,208,229,192,194,189,224,
187,156]],[[230,188,209,167,146,125,165,166,229,192,208,224,104,189,
194,187]],[[188,230,209,167,146,165,125,166,189,208,229,224,184,192,
187,193]],[[167,230,209,188,184,104,41,203,151,195,146,128,125,161,
121,86]],[[230,188,209,167,146,125,165,189,224,166,203,184,205,193,
186,197]],[[13,59,51,9,5,55,53,15,1,99,223,187,30,116,
156,22]],[[230,167,209,188,146,184,203,125,128,104,195,151,226,161,
172,216]],[[188,166,217,167,20,62,146,41,230,169,1,104,93,177,
125,215]],[[10,42,12,33,71,52,6,18,29,25,0,39,86,16,44,67]],[[230,188,209,167,146,125,165,166,208,187,229,194,192,189,
202,206]],[[177,225,206,223,185,187,166,229,213,215,171,141,129,194,
156,202]],[[188,230,209,167,165,224,146,189,151,184,193,220,212,125,
222,197]],[[188,167,230,209,41,83,146,166,229,187,192,125,104,215,
51,156]],[[39,10,42,71,18,12,65,35,25,33,86,29,6,67,31,20]],[[167,230,188,209,104,146,203,128,125,184,121,195,161,41,
151,86]],[[188,230,167,146,166,125,171,169,209,194,211,192,225,217,
198,221]],[[230,167,209,188,203,104,195,146,184,125,128,226,216,172,
151,212]],[[167,62,230,188,20,125,209,146,41,104,83,184,129,100,
183,31]],[[230,188,209,167,146,125,165,166,192,189,208,202,205,229,
224,104]],[[62,167,188,20,230,209,146,104,125,41,83,184,129,13,
144,180]],[[228,144,180,184,121,176,178,65,134,25,220,71,203,35,
182,86]],[[188,230,209,167,165,226,184,224,193,220,205,203,189,180,
151,212]],[[10,39,41,42,86,184,20,18,33,12,167,121,71,151,
23,44]]]
    best_actions =[230,230,190,20,167,230,188,230,0,230,230,230,210,84,230,146,146,62,230,0,41,53,230,230,104,0,0,230,230,230,230,209,0,167,167,230,167,230,0,230,167,211,107,146,209,147,230,230,230,230,0,230,230,230,230,230,230,0,230,146,0,230,230,0,0,230,0,146,230,188,0,209,230,190,83,230,0,230,215,197,147,146,0,167,230,0,104,230,0,230,136,0,230,230,230,188,0,0,230,125]
    best_rewards =[1.4385399383106103,4.163570259578033,1.1750645550009304,2.1905557471448214,1.3537912250861024,2.1571755233262477,0.5383606489732466,1.3548273756583118,-1.0,6.192409210852265,0.7457373339779906,1.2663553141464436,0.46714051903862863,0.07625460266257356,0.8939863699577358,0.21539955399325653,1.409355418155497,1.1583589907197531,0.7505794204410444,-1.0,0.1606340893005168,0.22807339190531883,7.15428851568594,1.8257191810278819,0.9377554291469017,-1.0,-1.0,1.572591911676943,2.1175069841522665,0.6772154196313903,1.0389513697364796,2.9907273881311203,-1.0,0.6525058845829981,4.584832935262262,2.08120774882876,0.40110015901928875,0.564726122543161,-1.0,1.0802375029065958,0.4245519386904527,1.7721067806131217,0.2424429054811149,1.1596408505382958,0.6883764025667438,0.13095719820488244,3.097957725190257,0.6515521786109639,0.4823961993687621,1.2168789284509356,-1.0,0.9041123085338352,0.5698825946861703,0.8196931417470019,0.9664344456170744,1.4791459210242799,0.8532195033843057,-1.0,0.7048938820177638,1.8742406006476329,-1.0,1.2466136135463015,1.2314786863420493,-1.0,-1.0,1.4421779154633718,-1.0,1.323035015869514,1.819605860441138,0.4263942431374245,-1.0,4.489080052313924,1.1656869766201692,1.6322265016975357,0.32331526165045593,1.3604123851797603,-1.0,0.41019389249965466,1.0104684160445467,0.7090989763721849,1.708106368961726,0.5125482452445277,-1.0,0.9868895308277389,1.341420975392082,-1.0,0.4627415564530517,1.2743704628185608,-1.0,0.6110767580894577,1.079339245466372,-1.0,0.6283990760742627,1.1717367304437285,1.6635865868727344,6.932496561696265,-1.0,-1.0,0.6370001187827068,0.521508186730749]
    for candi_size in [16]:
        valid_case_num = 0
        match_case_num = 0
        unmatched_best_actions = []
        unmatched_best_actions_candidates = []
        for i in range(0, 100):
            if best_rewards[i] < 0.0:
                continue
            valid_case_num += 1
            if best_actions[i] in ouput_actions_candidates[i][0][:candi_size]:
                match_case_num += 1
            else:
                unmatched_best_actions.append(best_actions[i])
                unmatched_best_actions_candidates.append(ouput_actions_candidates[i][0][:candi_size])
        print('Candidate size: {}, success rate: {}'.format(candi_size, match_case_num / valid_case_num))
        print('Valid case num: {}, match case num: {}'.format(valid_case_num, match_case_num))
        print('Unmatched best actions: {}'.format(unmatched_best_actions))
        print('Unmatched best actions candidates: {}'.format(unmatched_best_actions_candidates))

