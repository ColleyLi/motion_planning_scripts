'''
Author: fujiawei0724
Date: 2022-05-21 16:56:43
LastEditors: fujiawei0724
LastEditTime: 2022-06-29 08:39:53
Description: analyze the test data in multiple metric. 
'''

import numpy as np

if __name__ == '__main__':
    output_actions =[230,20,230,230,230,230,230,155,13,230,20,230,230,146,20,230,13,230,28,20,20,230,13,230,222,20,230,20,41,20,28,230,83,13,230,230,20,227,28,230,230,230,230,20,230,230,230,188,41,28,230,230,230,227,230,20,20,230,20,1,230,222,230,230,13,20,83,28,222,20,230,230,20,28,230,230,230,83,230,28,230,20,20,125,230,230,211,230,230,222,227,20,20,8,230,230,41,13,28,230]
    output_rewards =[0.8089814244336389,0.24043593307317712,0.527001265988548,-1.0,2.0896836454544205,1.9741294142961285,8.145761248978413,-1.0,-1.0,0.7525248555878212,-1.0,1.8065119147708049,-1.0,-1.0,0.1433872377238444,0.508646066822648,-1.0,21.918992854347245,-1.0,6.482612766525896,0.8053292412721051,3.3480659495488894,-1.0,-1.0,0.4760053360814501,0.32209056155814203,4.283102186890019,0.07553918160269188,0.8029646771468831,-1.0,-1.0,4.149603473550111,0.7158850734961852,0.5248660485451073,-1.0,1.4960312944726437,-1.0,0.5682217807789277,-1.0,0.7965288780262273,0.7949683219410881,0.8654061221037721,2.363435155979763,0.07912411259670458,1.459131239079042,1.5294876652877414,1.0259053665848672,-1.0,0.3083312011308023,0.38339082234669297,3.0807357135886653,1.0626626840156472,3.1001546574394996,0.5651464892569364,0.7050826670089622,0.660035696573213,0.5860983592802012,0.6565322204052033,-1.0,-1.0,2.7958652283816607,0.4665836578411657,-1.0,2.386190157615669,-1.0,-1.0,0.31760824185712117,-1.0,0.5375140228692403,1.0895205179163403,-1.0,0.7817018923786068,0.15376921548620193,-1.0,0.9314100027911371,0.9462995846425544,-1.0,0.29782773895770187,0.8671837214880993,-1.0,0.6210471662110832,-1.0,-1.0,0.934033327559893,4.198431723451832,-1.0,0.4380386915978655,0.5470150994966009,0.8950801638465242,0.44120687986087465,0.5961278942783897,0.07255924092469616,0.31735657474983997,0.14880293012142537,1.2470445023108103,0.8320842771262451,0.8644492939881533,0.08198394821709402,-1.0,0.93451580036817]
    ouput_actions_candidates =[[[230,227,222,225,188,224,226,216,218,194,228,219,212,229,
173,220]],[[20,37,8,44,41,35,25,18,10,12,62,0,29,42,14,16]],[[230,188,146,186,125,167,209,83,165,214,103,224,163,212,
173,184]],[[230,188,146,186,209,125,167,214,165,224,83,159,184,212,
86,222]],[[230,209,146,167,188,125,211,194,225,183,227,192,108,213,
219,206]],[[230,209,146,188,211,125,167,225,194,227,219,192,183,175,
213,108]],[[230,188,209,146,167,125,214,222,186,224,165,218,212,184,
226,220]],[[155,67,145,28,143,161,179,30,214,82,75,83,131,141,
13,224]],[[13,20,28,1,15,47,38,11,76,41,32,30,19,53,3,17]],[[230,20,209,83,125,146,167,41,62,104,188,91,161,80,
145,63]],[[20,41,83,62,37,146,8,44,199,35,104,224,67,12,
39,125]],[[230,209,146,211,188,125,225,167,194,192,227,219,183,213,
108,229]],[[230,146,209,211,125,188,194,183,192,219,227,206,108,225,
175,129]],[[146,83,41,188,20,125,209,104,230,62,224,167,199,161,
8,214]],[[20,83,41,62,230,104,125,209,146,167,188,80,145,91,
44,161]],[[230,188,186,146,125,167,212,224,163,173,214,165,222,209,
218,184]],[[13,28,8,38,20,44,11,1,37,15,53,3,17,32,30,12]],[[230,209,167,146,125,83,20,188,41,62,104,91,145,139,
169,211]],[[28,179,145,82,30,67,13,143,141,131,155,47,161,75,
187,219]],[[20,8,37,44,12,25,10,21,14,41,50,31,0,62,35,29]],[[20,83,41,62,125,104,146,167,209,230,188,37,35,8,
44,42]],[[230,209,188,146,125,167,222,214,172,159,184,130,195,83,
220,212]],[[13,28,38,15,1,11,17,3,20,32,53,30,19,120,
8,34]],[[230,146,188,186,83,125,167,41,209,165,86,214,159,88,
184,90]],[[222,230,155,212,125,205,149,188,214,159,209,184,130,178,
172,176]],[[20,13,28,37,8,44,41,38,47,11,62,32,1,12,
3,120]],[[230,209,146,167,188,125,211,194,225,183,227,192,108,213,
175,219]],[[20,37,8,44,41,25,10,35,12,18,62,14,0,42,29,52]],[[41,83,4,35,8,76,53,22,103,100,18,9,32,186,
13,14]],[[20,83,41,62,37,44,104,146,8,199,12,224,214,125,
77,75]],[[28,145,179,30,67,219,82,143,224,20,47,161,141,13,
155,91]],[[230,188,209,167,146,125,224,214,186,226,227,222,165,194,
225,173]],[[83,20,146,125,188,41,230,209,104,167,62,161,155,37,
130,214]],[[13,1,15,20,9,19,76,28,30,49,62,93,55,38,32,11]],[[230,20,83,209,41,167,146,125,62,104,188,91,145,80,
12,38]],[[230,209,146,83,188,125,20,167,41,104,62,161,155,205,
222,69]],[[20,44,8,28,37,13,12,41,143,120,119,83,50,38,
15,14]],[[227,230,222,225,226,216,224,194,228,218,188,219,220,212,
200,229]],[[28,179,145,82,30,219,13,47,131,141,143,103,38,187,
15,91]],[[230,188,222,125,146,224,186,214,212,218,209,220,216,228,
167,226]],[[230,209,146,167,83,125,20,188,41,104,62,91,161,63,
145,211]],[[230,209,167,146,83,20,125,41,188,104,62,91,145,63,
161,80]],[[230,209,146,188,167,125,211,225,83,194,183,227,192,108,
175,213]],[[20,83,62,104,41,125,146,209,167,188,230,161,44,37,
52,8]],[[230,188,209,167,146,125,214,224,186,227,165,194,173,226,
222,206]],[[230,209,125,188,146,222,167,83,130,159,214,184,172,212,
149,178]],[[230,209,211,146,225,227,125,219,192,229,188,194,200,108,
183,213]],[[188,83,146,20,209,41,125,104,155,230,161,214,37,199,
205,67]],[[41,83,35,4,76,8,103,186,22,100,53,90,62,21,
14,32]],[[28,67,224,155,214,161,179,30,145,63,141,82,44,47,
14,138]],[[230,209,146,167,188,125,211,183,194,225,227,175,108,192,
219,213]],[[230,209,211,146,225,125,227,229,194,108,219,183,192,200,
213,206]],[[230,209,146,188,167,125,211,183,194,225,227,108,175,219,
192,173]],[[227,229,219,173,200,225,206,211,217,194,230,103,175,177,
188,223]],[[230,209,83,125,20,146,167,41,104,188,62,161,91,145,
169,222]],[[20,83,41,62,104,146,230,125,188,167,209,44,37,12,
8,145]],[[20,83,125,209,146,41,230,62,104,167,188,161,37,75,
52,123]],[[230,209,83,125,146,20,167,188,41,104,62,91,145,169,
225,211]],[[20,41,125,230,83,35,62,167,146,37,104,69,0,8,
209,29]],[[1,13,15,30,28,38,20,32,11,19,55,41,76,91,26,49]],[[230,188,209,146,167,125,224,227,214,226,222,225,186,213,
206,173]],[[222,230,125,212,155,205,188,214,209,149,159,184,130,172,
178,193]],[[230,20,209,167,83,146,125,41,62,104,188,91,145,80,
38,102]],[[230,209,167,146,125,83,20,188,41,62,104,91,145,63,
123,136]],[[13,28,38,20,1,15,11,17,30,53,3,32,19,120,
34,8]],[[20,83,41,62,104,146,125,37,44,35,8,167,42,12,
25,39]],[[83,20,62,1,41,76,13,15,49,9,104,146,30,5,
93,55]],[[28,20,13,145,38,219,30,37,103,1,41,47,53,179,
82,15]],[[222,230,125,212,155,205,188,214,209,149,159,172,184,130,
178,193]],[[20,8,44,37,12,21,25,14,41,31,13,28,50,10,0,35]],[[230,209,146,188,211,125,167,225,194,183,192,219,227,108,
213,206]],[[230,209,167,146,125,83,20,41,188,62,104,91,145,80,
63,139]],[[20,41,83,62,37,104,125,35,167,8,146,44,42,25,
18,39]],[[28,145,143,30,83,179,200,76,13,91,20,211,187,229,
219,141]],[[230,222,155,188,209,214,212,172,205,149,125,184,180,159,
220,176]],[[230,222,209,188,125,212,205,172,155,214,220,149,159,146,
184,130]],[[230,209,125,188,146,167,222,83,172,212,104,214,205,41,
130,180]],[[83,62,41,146,20,1,76,15,93,53,87,91,103,55,
32,13]],[[230,125,209,188,146,167,222,83,130,41,159,184,214,178,
212,149]],[[28,179,82,155,67,145,30,141,13,131,47,143,103,75,
161,214]],[[230,227,222,188,224,225,216,218,226,194,228,212,219,220,
229,173]],[[20,41,83,62,146,104,188,37,125,44,230,12,8,199,
119,92]],[[20,37,41,8,44,25,62,12,10,31,35,39,83,14,42,50]],[[125,20,230,41,83,167,146,209,104,62,35,37,130,188,
69,222]],[[230,209,188,146,222,125,167,214,172,195,220,184,159,176,
203,155]],[[230,209,188,146,222,125,214,172,167,195,220,130,159,184,
176,212]],[[211,229,225,227,200,209,219,230,192,146,194,108,181,183,
215,217]],[[230,188,209,146,167,125,186,224,214,165,173,227,226,194,
184,222]],[[230,188,209,146,167,125,186,224,214,222,227,226,212,218,
173,165]],[[222,214,159,199,130,37,212,138,218,161,205,8,149,65,
176,178]],[[227,229,219,200,211,225,206,217,173,194,177,181,175,213,
223,215]],[[20,41,37,62,8,44,83,12,25,10,35,31,14,39,50,21]],[[20,41,37,35,62,8,83,44,25,18,0,125,12,10,
42,2]],[[8,20,13,44,37,14,35,25,41,21,18,28,12,11,31,10]],[[230,188,209,146,167,125,222,224,214,226,186,218,228,212,
227,165]],[[230,20,209,83,125,167,146,41,62,104,188,91,80,161,
145,123]],[[41,83,4,9,22,35,76,32,53,13,8,103,7,20,
62,19]],[[13,28,15,38,1,11,20,3,30,17,32,19,53,8,
120,34]],[[28,145,143,83,200,30,179,146,219,141,187,229,211,91,
20,131]],[[230,209,211,146,225,125,227,229,219,192,194,83,200,108,
188,152]]]
    best_actions =[230,104,230,85,230,230,230,0,0,230,0,230,83,0,41,215,0,167,0,20,230,209,0,0,230,62,230,105,230,0,0,230,230,70,83,230,0,230,0,230,230,146,230,209,230,125,230,0,230,230,230,230,188,230,230,41,83,230,0,0,230,230,104,188,20,0,104,0,230,20,0,209,146,0,230,230,0,167,230,0,230,0,0,230,188,83,230,230,230,214,230,4,125,20,230,230,167,20,230,230]
    best_rewards =[0.8089814244336389,0.2732868580764553,0.527001265988548,1.4991248727998967,2.0896836454544205,1.9741294142961285,8.145761248978413,-1.0,-1.0,0.7525248555878212,-1.0,1.8065119147708049,0.5362327812866757,-1.0,0.14343538672781023,0.5852503918813726,-1.0,21.918992854347245,-1.0,6.482612766525896,1.4825057494515395,3.3480659495488894,-1.0,-1.0,0.5567890366290387,0.3481350323007293,4.283102186890019,0.08400200393354532,1.8334084903065238,-1.0,-1.0,4.149603473550111,1.0671546985611735,0.6696242507905893,0.3875831980732657,1.4960312944726437,-1.0,0.7298727699600185,-1.0,0.7965288780262273,0.7949683219410881,0.917189153181265,2.363435155979763,0.07914146538617288,1.459131239079042,1.5294876652877414,1.0259053665848672,-1.0,0.40435536492277646,0.6368076993975244,3.0807357135886653,1.0626626840156472,3.1001546574394996,0.7090594010551615,0.7050826670089622,0.7057991543249854,0.6596094912704449,0.6565322204052033,-1.0,-1.0,2.7958652283816607,0.6044548498031175,0.6322108380903911,2.386190157615669,0.07813730841409941,-1.0,0.3360939009565126,-1.0,0.6287004201342512,1.0895205179163403,-1.0,0.7817018923786068,0.15733706445968826,-1.0,0.9314100027911371,0.9462995846425544,-1.0,0.3660285170035576,0.8671837214880993,-1.0,0.6210471662110832,-1.0,-1.0,1.2989598995620018,4.198431723451832,0.5031293583262066,0.7762167752693337,0.5470150994966009,0.8950801638465242,0.5141067005315683,0.7645410481089767,0.07347159217125385,0.3179423836757495,0.16710326915230836,1.2470445023108103,0.8320842771262451,1.283603499287474,0.08405120306089263,0.7521587582191739,0.93451580036817]
    for candi_size in [16]:
        valid_case_num = 0
        match_case_num = 0
        unmatched_best_actions = []
        unmatched_best_actions_candidates = []
        for i in range(0, 100):
            if best_rewards[i] < 0.0:
                continue
            valid_case_num += 1
            if best_actions[i] in ouput_actions_candidates[i][0][:candi_size]:
                match_case_num += 1
            else:
                unmatched_best_actions.append(best_actions[i])
                unmatched_best_actions_candidates.append(ouput_actions_candidates[i][0][:candi_size])
        print('Candidate size: {}, success rate: {}'.format(candi_size, match_case_num / valid_case_num))
        print('Valid case num: {}, match case num: {}'.format(valid_case_num, match_case_num))
        print('Unmatched best actions: {}'.format(unmatched_best_actions))
        print('Unmatched best actions candidates: {}'.format(unmatched_best_actions_candidates))

