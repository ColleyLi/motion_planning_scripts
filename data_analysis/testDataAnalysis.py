'''
Author: fujiawei0724
Date: 2022-05-21 16:56:43
LastEditors: fujiawei0724
LastEditTime: 2022-06-25 20:56:16
Description: analyze the test data in multiple metric. 
'''

import numpy as np

if __name__ == '__main__':
    output_actions =[209,22,230,22,230,62,41,172,230,62,230,230,230,230,230,209,230,213,230,18,230,209,230,41,209,41,230,153,38,41,214,230,41,230,230,41,230,209,230,62,52,230,230,52,188,230,153,230,209,214,209,41,209,209,230,209,62,42,41,209,172,41,230,230,230,230,230,41,230,209,209,209,41,22,41,62,209,209,230,230,41,230,41,213,62,230,62,52,230,153,130,230,230,209,230,41,230,230,230,230]
    output_rewards =[-1.0,-1.0,24.295721699711898,-1.0,-1.0,-1.0,1.6015605325375577,0.44405440761406795,0.8803824973907811,0.470978654691422,1.4856267160309713,0.4342191725175249,1.7098017971181143,1.4896083543033007,-1.0,-1.0,0.8743115888691735,0.4397182052398475,-1.0,0.10572160465191661,1.3352716156185243,0.6556464151769047,0.9563491237733089,-1.0,-1.0,0.5656449628140725,1.3764589740226194,-1.0,-1.0,1.5071586922008549,0.4480965115348667,-1.0,0.28778031290940903,2.244370280844852,0.7909366778883352,-1.0,1.1165472316863325,0.5838529656830301,0.951889991487781,0.295581504580635,-1.0,1.1675262112321407,1.0406732107491754,-1.0,0.56929355594802,0.9286216326660715,-1.0,0.6713861430562401,-1.0,0.7429654826213701,0.7460213192568197,0.7803443319873362,2.150313530762384,0.43529609986210804,-1.0,0.8220391094094559,-1.0,0.2211956690402761,-1.0,1.1269089764115419,0.4961543522349836,0.9025816711928748,0.5645929670429916,1.3575215668444063,1.2558796586133423,2.044039167961392,0.9301547784079933,-1.0,13.959190665344517,0.7078301036988863,0.6529360636871439,0.7814528241833024,-1.0,-1.0,0.5214638549666024,0.24369430421855712,-1.0,0.13270232154937914,0.40363500074034525,5.497017651065699,0.27605237686168493,0.38172795867247855,0.06949015169489321,0.47856501486825603,-1.0,-1.0,-1.0,0.2828000036788841,-1.0,-1.0,-1.0,1.3231919425701748,1.119913811294916,0.5599258647115004,0.8416651865865996,-1.0,3.543186466397781,1.4814426250040864,1.4145997431573354,-1.0]
    ouput_actions_candidates =[[[209,230,188,62,146,41,104,83,20,167,125,151,100,4,
71,60]],[[22,38,40,15,17,5,30,57,43,11,59,45,28,9,49,19]],[[230,209,188,62,146,83,104,41,20,167,125,114,45,100,
135,140]],[[22,38,17,40,5,15,45,30,59,43,49,57,9,7,
11,143]],[[230,188,167,210,209,172,193,189,226,130,62,165,104,128,
157,151]],[[62,41,209,188,20,146,83,104,167,125,230,153,18,217,
52,140]],[[41,62,20,188,83,104,167,209,146,125,18,52,21,42,
29,153]],[[172,188,130,62,195,149,174,140,189,230,50,222,147,157,
151,128]],[[230,188,62,209,167,41,172,130,104,125,146,83,189,20,
149,195]],[[62,41,20,83,188,209,104,146,167,125,230,18,21,52,
217,12]],[[230,209,188,62,146,167,104,83,41,20,125,114,176,100,
210,228]],[[230,209,213,169,104,190,202,179,188,114,192,158,196,41,
185,152]],[[230,209,167,188,192,146,210,125,193,214,211,226,228,104,
201,205]],[[230,188,189,172,210,209,167,226,195,151,130,149,168,214,
186,176]],[[230,192,213,209,190,169,179,196,215,158,211,185,198,221,
152,150]],[[209,41,104,62,146,188,83,20,167,125,169,38,17,213,
230,143]],[[230,188,172,189,209,195,210,167,151,130,149,186,226,176,
62,214]],[[213,230,169,209,190,192,179,202,196,158,152,185,114,221,
188,211]],[[230,188,209,167,104,210,125,193,146,83,172,189,186,226,
228,62]],[[18,21,42,52,63,65,29,5,12,28,23,58,153,15,
16,57]],[[230,188,172,189,210,209,130,167,226,195,151,149,157,165,
193,191]],[[209,230,188,62,146,83,41,20,104,167,125,114,18,45,
217,140]],[[230,209,188,167,192,210,211,193,198,104,217,214,125,206,
205,165]],[[41,62,167,104,153,188,20,146,217,83,209,18,133,151,
5,17]],[[209,62,188,41,83,146,104,20,167,230,125,153,18,140,
151,186]],[[41,62,20,104,83,188,167,209,146,153,125,18,151,17,
52,186]],[[230,209,167,188,192,210,146,104,125,211,193,198,205,228,
165,214]],[[153,217,171,133,106,18,118,151,204,28,225,5,63,42,
140,17]],[[38,41,17,213,104,114,40,169,70,5,209,146,22,45,
7,192]],[[41,22,38,40,15,104,17,20,5,57,11,43,30,62,
45,59]],[[214,207,193,220,218,165,201,128,151,195,226,199,216,182,
210,168]],[[230,44,147,188,92,42,130,62,21,41,172,111,50,52,
46,23]],[[41,20,52,21,16,33,29,12,62,218,58,6,79,104,
50,10]],[[230,188,209,192,167,211,210,193,198,217,214,206,228,220,
205,226]],[[230,172,188,189,130,210,195,149,226,151,167,157,209,193,
222,165]],[[41,62,20,104,83,146,209,188,167,230,125,38,17,40,
45,5]],[[230,188,172,189,209,210,167,130,195,226,151,149,176,193,
146,165]],[[209,230,104,41,146,169,213,188,62,202,83,190,167,20,
38,70]],[[230,188,209,172,189,167,210,195,151,62,146,130,226,149,
176,186]],[[62,188,52,130,41,172,50,77,31,81,42,20,92,140,
174,12]],[[52,153,42,140,18,50,218,12,29,77,172,58,195,31,
151,117]],[[230,188,172,189,130,195,210,151,209,149,167,62,226,176,
186,193]],[[230,210,209,188,167,172,189,146,130,226,157,191,165,201,
228,151]],[[52,77,172,31,174,140,153,50,130,218,100,12,81,42,
195,58]],[[188,192,209,217,167,202,214,221,208,193,206,146,160,220,
196,194]],[[230,209,188,167,192,210,193,146,214,104,125,211,217,201,
226,206]],[[153,217,18,140,151,52,42,63,186,65,133,50,184,204,
28,171]],[[230,188,167,209,62,83,104,41,125,146,20,193,172,153,
210,189]],[[209,213,169,190,202,230,179,152,196,104,221,171,188,158,
192,114]],[[214,207,193,220,218,128,201,195,151,165,104,146,167,188,
226,216]],[[209,188,230,62,146,83,20,41,104,167,125,217,114,135,
18,143]],[[41,38,17,104,22,40,7,70,49,5,169,143,213,122,
68,20]],[[209,230,188,62,146,83,104,41,167,20,125,114,18,140,
100,45]],[[209,230,62,188,146,83,41,104,20,167,125,114,45,38,
122,135]],[[230,172,130,188,189,210,195,149,226,157,147,167,151,191,
62,176]],[[209,230,188,62,146,83,41,20,104,167,125,114,100,135,
45,140]],[[62,41,188,20,83,209,167,104,146,125,230,18,153,52,
140,42]],[[42,18,153,52,21,41,46,50,23,63,12,140,29,62,
4,184]],[[41,62,188,104,83,20,167,209,146,125,230,38,17,22,
143,30]],[[209,230,188,62,146,83,104,41,20,167,125,114,45,100,
135,140]],[[172,188,189,195,130,62,230,151,149,176,128,210,193,222,
186,209]],[[41,217,153,62,104,146,209,171,106,133,118,167,151,18,
188,28]],[[230,188,167,209,192,210,193,214,104,226,205,128,220,201,
165,211]],[[230,209,192,213,215,190,179,167,158,188,169,211,185,198,
196,181]],[[230,209,41,62,104,146,188,167,83,20,125,38,114,213,
40,45]],[[230,209,213,192,169,190,179,158,196,185,211,215,114,221,
188,198]],[[230,172,189,130,188,210,195,151,226,149,193,176,186,157,
168,128]],[[41,62,209,104,20,83,188,167,230,146,125,22,40,38,
45,15]],[[230,188,167,209,210,193,172,228,226,104,189,205,165,214,
201,125]],[[209,213,190,169,202,230,152,179,196,192,221,158,171,185,
188,114]],[[209,213,169,190,202,152,179,196,221,171,230,158,185,188,
146,114]],[[209,230,188,62,146,83,20,41,104,167,125,140,100,81,
18,71]],[[41,62,209,188,104,230,167,83,20,146,125,40,22,38,
45,17]],[[22,41,38,15,40,20,57,17,5,18,21,30,43,42,28,52]],[[41,20,207,52,218,193,62,104,201,128,214,165,195,220,
174,226]],[[62,41,188,20,83,104,167,209,146,125,52,42,21,50,
92,230]],[[209,104,188,213,169,41,230,190,146,62,83,179,167,192,
221,202]],[[209,230,62,188,83,41,146,20,104,167,125,114,45,18,
38,100]],[[230,147,42,188,62,41,130,92,46,44,50,21,104,167,
52,111]],[[230,210,193,172,189,226,165,188,128,214,199,205,168,130,
151,201]],[[41,62,20,83,104,188,209,146,167,125,18,217,153,230,
52,21]],[[230,130,188,172,210,167,209,147,189,226,157,191,149,201,
151,195]],[[41,20,62,104,52,16,21,137,143,218,33,15,59,38,
146,207]],[[213,209,230,190,169,192,196,152,179,221,202,185,158,211,
198,171]],[[62,188,41,52,20,130,31,50,12,77,42,172,21,83,
48,92]],[[230,188,209,167,193,214,210,192,226,207,201,220,128,146,
205,165]],[[62,188,41,209,167,104,20,83,146,230,125,42,52,21,
153,50]],[[52,42,18,21,12,29,58,31,16,50,153,140,77,48,
0,4]],[[230,130,172,210,188,147,191,157,226,189,149,167,201,111,
209,92]],[[153,217,171,106,151,140,184,133,18,118,186,204,42,225,
164,52]],[[130,62,31,188,52,50,41,147,92,77,42,172,46,21,
48,12]],[[230,209,192,213,190,169,179,196,158,215,185,221,152,211,
198,114]],[[230,188,192,209,167,211,193,210,217,198,214,206,221,194,
215,220]],[[209,230,213,169,190,104,202,146,188,179,152,221,196,41,
171,158]],[[230,188,209,167,62,146,125,104,210,172,83,41,130,189,
151,226]],[[41,18,22,21,38,52,5,17,40,63,15,62,20,42,28,29]],[[230,209,188,62,167,104,146,41,83,125,20,151,153,172,
147,92]],[[230,192,209,213,169,190,179,196,158,215,185,211,221,198,
152,114]],[[230,188,167,192,209,193,214,210,217,211,220,226,206,128,
207,201]],[[230,209,188,167,104,146,125,83,62,41,192,20,211,198,
213,217]]]
    best_actions =[83,0,167,0,83,230,83,230,178,146,230,230,230,230,0,146,230,230,0,20,230,230,214,0,0,104,209,230,0,41,230,83,94,230,230,211,230,188,230,230,0,230,167,0,230,230,230,230,0,230,230,230,230,125,0,104,0,210,0,230,230,146,188,230,209,230,230,0,230,230,230,230,0,0,210,48,0,125,230,209,125,147,189,230,41,0,41,83,104,0,0,230,230,104,104,17,230,230,230,0]
    best_rewards =[1.1813594997262076,-1.0,24.295721699711898,-1.0,8.463360076056444,1.020418557071618,1.6374679089191926,0.751862149964396,0.9134185996862784,0.5591663555534606,1.4856267160309713,0.4342191725175249,1.7098017971181143,1.4896083543033007,-1.0,0.5058196509212192,0.8743115888691735,0.6165113519133332,-1.0,0.10871345365450304,1.3352716156185243,0.6831525093505882,1.0283951461825467,-1.0,-1.0,0.5988403359227846,1.3764589740226194,2.0618637952338026,-1.0,1.5071586922008549,0.4654778048543543,0.8247488666959277,0.36161063035779045,2.244370280844852,0.7909366778883352,0.3289509416786214,1.1165472316863325,0.5859003189794535,0.951889991487781,0.37584829332796665,-1.0,1.1675262112321407,1.0406732107491754,-1.0,0.6067933808949327,0.9286216326660715,1.315292325770021,0.6713861430562401,-1.0,1.0005034739802814,0.7830375490149192,1.0048039857379198,2.547324227339704,0.43529609986210804,-1.0,0.8341291611881767,-1.0,0.3145612913218777,-1.0,1.1717820439017763,0.8171204752070799,1.5175110975676016,0.5645929670429916,1.3575215668444063,1.2559015346965765,2.044039167961392,0.9301547784079933,-1.0,13.959190665344517,0.7464232342389273,0.6814490642602576,0.8223817574743267,-1.0,-1.0,0.7618891410734886,0.24857552091945576,-1.0,0.13270232154937914,0.40363500074034525,5.497017651065699,0.2838940360169777,0.4216944805465708,0.1077624587061925,0.9356505017097004,0.06596653445929801,-1.0,0.26821751813608197,0.3583429955214377,2.710770623991806,-1.0,-1.0,1.3231919425701748,1.119913811294916,0.5609935861274935,0.9030050293315249,0.09223888765974599,3.543186466397781,1.4814426250040864,1.4145997431573354,-1.0]
    for candi_size in [2]:
        valid_case_num = 0
        match_case_num = 0
        unmatched_best_actions = []
        unmatched_best_actions_candidates = []
        for i in range(0, 100):
            if best_rewards[i] < 0.0:
                continue
            valid_case_num += 1
            if best_actions[i] in ouput_actions_candidates[i][0][:candi_size]:
                match_case_num += 1
            else:
                unmatched_best_actions.append(best_actions[i])
                unmatched_best_actions_candidates.append(ouput_actions_candidates[i][0][:candi_size])
        print('Candidate size: {}, success rate: {}'.format(candi_size, match_case_num / valid_case_num))
        print('Valid case num: {}, match case num: {}'.format(valid_case_num, match_case_num))
        print('Unmatched best actions: {}'.format(unmatched_best_actions))
        print('Unmatched best actions candidates: {}'.format(unmatched_best_actions_candidates))

