'''
Author: fujiawei0724
Date: 2022-05-21 16:56:43
LastEditors: fujiawei0724
LastEditTime: 2022-06-15 14:51:53
Description: analyze the test data in multiple metric. 
'''

import numpy as np

if __name__ == '__main__':
    output_actions =[83,167,215,230,230,83,230,209,230,209,31,20,83,215,167,22,167,215,230,230,230,125,20,167,83,83,209,167,188,31,230,230,39,39,209,230,83,230,83,230,22,215,215,209,167,43,83,209,167,22,167,15,83,209,215,209,230,209,20,230,215,22,209,230,230,83,230,22,209,22,230,230,125,230,167,31,230,218,215,209,31,167,230,83,167,230,230,22,31,230,43,227,209,167,83,209,31,230,20,20]
    output_rewards =[-1.0,2.299841590643789,0.9659348280527764,6.103751818086192,4.127651716348456,-1.0,0.6385658191457716,0.3107900952298072,0.6415271239749188,0.41939917509016195,-1.0,-1.0,0.844907338965585,0.8889179794525441,0.8484728856184218,0.1801556644034078,0.6881366790480739,-1.0,1.412296633484741,1.0850653803255543,1.9062019599489484,0.6784151833090386,0.31643133392538636,0.07462682790371297,-1.0,-1.0,0.8738056739022277,0.5542393391676296,-1.0,-1.0,0.9604496756750307,3.7736364705449907,0.10793153478295874,-1.0,-1.0,1.0859468844172586,-1.0,0.5046111297527788,0.836894228436126,0.5097274689123256,0.5511282548271069,1.4989598863667386,0.6280060084022696,9.000677382690668,2.273898727826174,0.1102043057671525,-1.0,1.774149949405432,10.38719363354518,0.3682954500215463,-1.0,-1.0,-1.0,1.0299164064580202,0.4144326868072269,0.9993166229645492,0.6755739611107082,1.1397886761340255,5.308431911855185,-1.0,0.6027262866095526,0.5104136055606736,2.72222458785295,2.5478995805525444,-1.0,-1.0,1.7004508464455252,0.5259262760290447,3.551206222158268,0.35988137048369956,2.1240549234212898,0.6699191799122834,0.12779976583790215,0.7389673121792789,0.3216976605584458,0.2923663527874742,-1.0,0.6831250620781506,0.4654232139553776,-1.0,-1.0,0.6508031429667219,0.7879455412239162,0.24504709020963708,-1.0,0.686479454025718,0.14289508216189192,-1.0,-1.0,0.3377544182738313,0.27545389790164754,-1.0,-1.0,0.6330025223044035,0.6039892703119931,0.23015430764975245,0.5879406286496175,0.8495032772440059,0.4126765572489552,0.4899705810035023]
    ouput_actions_candidates =[[[83,20,41,167,188,125,62,230,146,104,209,92,12,23,
39,157]],[[167,83,230,41,188,146,209,20,125,62,104,92,138,56,
189,210]],[[215,171,209,150,181,208,192,213,164,131,230,177,148,43,
127,204]],[[230,209,167,125,188,146,104,191,226,83,214,62,201,170,
199,159]],[[230,209,125,188,167,213,227,183,215,191,225,175,181,214,
150,112]],[[83,188,20,167,146,230,125,62,41,104,209,15,38,198,
32,92]],[[230,125,188,209,167,226,214,191,218,199,201,213,195,159,
168,146]],[[209,215,213,230,181,150,192,43,164,177,131,148,175,167,
154,225]],[[230,188,146,218,191,167,172,125,50,226,92,151,210,62,
189,130]],[[209,22,20,43,215,83,127,208,125,150,167,204,230,131,
15,181]],[[31,130,226,212,218,92,191,172,210,147,75,21,77,60,
39,111]],[[20,15,83,43,32,38,19,41,22,24,80,215,9,76,
11,28]],[[83,167,20,188,41,125,230,146,62,104,209,92,138,12,
56,75]],[[215,171,209,150,208,181,127,43,131,213,196,177,164,148,
192,22]],[[167,230,41,209,83,146,188,125,20,104,62,208,169,56,
215,150]],[[22,43,20,15,9,70,11,93,28,213,72,221,137,162,
143,95]],[[167,83,41,20,230,188,209,125,146,62,104,92,56,169,
122,12]],[[215,150,171,209,181,213,208,43,127,164,131,148,192,204,
22,177]],[[230,188,146,167,218,21,226,31,92,130,172,77,147,191,
210,125]],[[230,146,188,167,209,191,125,226,172,210,218,212,228,147,
92,168]],[[230,209,125,188,167,213,227,183,215,225,175,150,181,191,
177,112]],[[125,213,188,20,95,62,230,22,227,215,167,175,41,225,
164,177]],[[20,41,39,83,167,60,33,16,31,23,2,12,81,92,
6,21]],[[167,41,83,20,209,230,146,188,125,62,104,56,92,208,
169,215]],[[83,167,20,188,41,125,146,230,62,104,209,92,138,12,
165,75]],[[83,20,41,125,188,167,62,230,146,104,92,198,165,157,
23,15]],[[209,230,215,171,208,167,127,150,125,43,22,181,131,213,
196,192]],[[167,83,41,230,209,146,20,188,125,104,62,208,215,169,
150,56]],[[188,62,218,146,230,50,214,128,138,130,79,191,151,20,
56,189]],[[31,39,130,21,60,33,6,16,2,35,147,23,226,92,
81,77]],[[230,188,209,125,213,227,183,215,167,225,175,150,181,177,
112,154]],[[230,167,146,188,209,226,210,125,212,191,228,168,172,170,
224,149]],[[39,20,33,23,31,60,16,2,198,12,81,92,15,199,
38,35]],[[39,130,31,60,159,218,226,6,75,201,37,199,16,121,
176,157]],[[209,20,230,83,104,22,215,43,208,167,171,125,150,131,
181,41]],[[230,167,146,188,209,226,125,210,191,212,172,228,170,168,
224,90]],[[83,41,20,167,188,230,125,146,209,62,104,92,12,56,
23,2]],[[230,146,188,167,191,189,151,62,172,125,214,128,218,50,
138,210]],[[83,188,20,230,167,41,146,125,62,104,209,15,43,38,
80,198]],[[230,146,188,167,218,191,172,125,226,210,62,50,151,92,
189,147]],[[22,43,215,208,181,131,127,150,15,217,171,213,148,177,
204,164]],[[215,171,43,181,150,131,208,22,213,177,148,164,15,217,
127,204]],[[215,43,171,22,208,150,181,127,131,209,213,148,177,217,
196,164]],[[209,230,171,215,208,150,167,181,192,164,213,177,148,131,
104,127]],[[167,83,230,41,209,146,188,125,20,104,62,208,215,169,
150,122]],[[43,22,15,9,11,70,28,24,72,32,49,131,217,17,
76,80]],[[83,167,20,41,230,146,188,209,125,104,62,12,92,56,
15,2]],[[209,230,167,125,215,171,104,146,208,150,192,188,83,181,
127,213]],[[167,209,230,83,146,41,188,125,20,104,62,208,215,169,
150,171]],[[22,215,43,127,208,150,181,131,171,217,213,204,196,148,
15,209]],[[167,230,209,146,188,83,20,125,41,62,104,21,92,212,
111,210]],[[15,43,32,38,20,22,19,9,24,80,11,76,28,70,17,49]],[[83,167,41,188,230,125,146,20,209,104,62,122,169,198,
215,150]],[[209,230,167,125,188,146,104,213,215,192,227,150,41,83,
62,181]],[[215,22,127,209,43,208,150,171,131,181,213,196,217,204,
148,164]],[[209,230,215,167,213,125,150,181,131,171,148,177,192,164,
188,43]],[[230,188,146,167,191,218,172,125,210,189,226,151,50,212,
138,62]],[[209,215,171,230,150,208,181,127,43,131,213,104,196,192,
167,22]],[[20,83,41,188,167,146,230,62,104,125,15,209,38,32,
43,22]],[[230,191,188,210,172,212,226,218,168,149,146,170,228,92,
153,75]],[[215,171,209,150,208,181,43,127,131,213,177,148,196,22,
164,192]],[[22,209,43,20,15,208,83,215,150,11,131,204,72,181,
127,169]],[[209,230,215,171,208,150,181,167,192,104,213,127,131,177,
43,164]],[[230,209,125,188,167,227,183,213,215,181,150,225,175,112,
177,191]],[[230,125,209,188,167,20,226,218,39,201,168,41,119,214,
174,199]],[[83,167,41,20,230,188,125,146,209,62,104,169,122,56,
92,215]],[[230,167,188,146,209,125,62,191,210,41,172,83,218,226,
228,168]],[[22,43,15,9,70,11,28,131,72,32,24,215,204,143,
93,213]],[[209,22,20,43,83,15,208,215,104,11,131,213,150,181,
127,204]],[[22,215,127,43,209,208,150,131,171,181,196,217,213,204,
20,148]],[[230,167,188,146,226,209,21,212,210,31,147,224,92,90,
228,77]],[[230,125,167,188,209,213,227,175,225,215,183,214,191,177,
112,154]],[[125,230,188,209,20,62,167,213,41,218,214,226,199,83,
39,201]],[[230,209,125,167,188,213,227,215,175,183,225,177,181,154,
150,104]],[[167,83,41,230,209,146,20,188,125,104,62,208,169,215,
56,122]],[[31,39,20,21,33,60,16,2,6,130,35,81,23,147,
12,92]],[[230,146,188,167,209,125,191,172,62,210,226,212,218,189,
205,151]],[[218,226,214,50,125,191,230,188,39,128,77,151,138,199,
58,159]],[[215,43,171,150,181,208,131,177,213,22,148,15,164,217,
204,127]],[[209,230,167,125,188,146,104,83,62,41,20,227,213,215,
150,181]],[[31,21,39,92,33,226,130,147,77,60,218,75,199,2,
6,23]],[[167,83,41,230,188,20,209,125,146,62,104,169,56,92,
122,138]],[[230,146,188,167,191,172,125,218,226,151,210,189,50,62,
209,212]],[[83,167,41,20,230,188,146,125,209,104,62,122,56,169,
92,215]],[[167,83,41,20,230,209,146,188,125,104,62,215,56,92,
122,12]],[[230,167,188,226,146,31,218,21,92,210,77,125,212,172,
147,191]],[[230,209,167,125,188,227,213,146,215,104,192,150,183,175,
177,225]],[[22,215,209,43,127,208,150,131,171,181,213,20,204,196,
83,148]],[[31,130,39,218,60,6,58,21,147,2,92,46,16,77,
79,75]],[[230,188,146,218,167,191,172,130,226,31,92,50,147,62,
77,44]],[[43,22,15,9,70,11,93,213,162,28,49,72,95,137,
32,17]],[[227,215,43,213,154,192,164,148,112,150,89,181,177,225,
206,49]],[[209,230,167,125,215,188,213,150,181,227,192,104,177,146,
171,183]],[[167,41,83,230,209,146,188,20,125,104,62,208,169,56,
215,150]],[[83,125,20,188,209,167,146,230,41,104,62,43,22,213,
150,215]],[[209,215,22,43,230,127,208,150,167,171,20,131,83,181,
213,204]],[[31,218,130,39,58,21,6,147,79,77,92,46,60,16,
2,12]],[[230,125,188,167,209,191,226,214,218,146,201,195,159,170,
199,168]],[[20,167,188,83,230,41,125,146,62,104,209,92,31,39,
21,33]],[[20,83,41,167,15,146,38,230,32,188,62,43,104,22,
9,19]]]
    best_actions =[0,230,188,230,230,0,230,125,230,230,169,0,209,230,230,127,230,0,230,230,230,147,104,125,0,0,230,167,0,0,230,230,210,0,20,230,0,212,230,230,211,167,230,209,188,167,0,230,146,230,0,0,0,230,230,209,230,230,41,0,230,230,230,230,0,230,230,43,188,230,126,230,230,230,230,62,146,212,230,83,230,230,230,230,62,230,62,0,0,230,188,0,104,230,230,211,52,230,210,20]
    best_rewards =[-1.0,5.571275613480733,3.2332433485550243,6.103751818086192,4.127651716348456,-1.0,0.6385658191457716,0.3107900952298072,0.6415271239749188,0.4330870312009085,1.6666505039605473,-1.0,1.1863105534009093,1.2315190229745918,1.0707870864666966,0.21692323954095888,0.7739059617683576,-1.0,1.412296633484741,1.0850653803255543,1.9062019599489484,1.3437488846416163,0.3776258017957627,0.07462682790371297,-1.0,-1.0,0.8795534384076654,0.5542393391676296,-1.0,-1.0,0.9604496756750307,3.7736364705449907,0.20129865404910982,-1.0,32.89463803305197,1.0859468844172586,-1.0,0.5250495146410649,1.65639461402372,0.5097274689123256,0.7949967737290289,4.992315470765989,0.6983162382243551,9.000677382690668,2.6388910581236042,0.13548931308689366,-1.0,2.0075724087133033,10.38719363354518,0.6533138441520023,-1.0,-1.0,-1.0,1.1252048830956383,0.6455839020925584,0.9993166229645492,0.6755739611107082,1.2112271240328956,9.980651404780755,-1.0,1.4022538146334558,0.8197073330283978,3.3085622020180034,2.5478995805525444,-1.0,0.45904253188094585,1.7004508464455252,0.554594122185093,3.551206222158268,0.4558746205694841,2.6084509913294345,0.6699191799122834,0.15166527682158756,0.7389673121792789,0.3607219167844756,0.3320510908751202,0.5792997411174727,0.8984821107756984,0.6368800034010265,0.698154053041598,2.1201199910326904,0.7571051480985665,0.7879455412239162,0.34889335028485086,0.43749382457974284,0.686479454025718,0.14289508216189192,-1.0,-1.0,0.3377544182738313,0.400578302454586,-1.0,2.9735157899023106,0.7370441779787619,0.7861616885073993,0.29308170947849166,0.591724675304688,0.8495032772440059,0.532987790983216,0.4899705810035023]
    for candi_size in [16]:
        valid_case_num = 0
        match_case_num = 0
        unmatched_best_actions = []
        unmatched_best_actions_candidates = []
        for i in range(0, 100):
            if best_rewards[i] < 0.0:
                continue
            valid_case_num += 1
            if best_actions[i] in ouput_actions_candidates[i][0][:candi_size]:
                match_case_num += 1
            else:
                unmatched_best_actions.append(best_actions[i])
                unmatched_best_actions_candidates.append(ouput_actions_candidates[i][0][:candi_size])
        print('Candidate size: {}, success rate: {}'.format(candi_size, match_case_num / valid_case_num))
        print('Valid case num: {}, match case num: {}'.format(valid_case_num, match_case_num))
        print('Unmatched best actions: {}'.format(unmatched_best_actions))
        print('Unmatched best actions candidates: {}'.format(unmatched_best_actions_candidates))

