'''
Author: fujiawei0724
Date: 2022-05-21 16:56:43
LastEditors: fujiawei0724
LastEditTime: 2022-06-11 15:08:54
Description: analyze the test data in multiple metric. 
'''

import numpy as np

if __name__ == '__main__':
    output_actions =[167,167,209,230,209,167,209,167,167,209,230,209,41,209,167,230,167,209,209,28,12,167,209,177,53,167,167,209,230,209,209,167,167,10,167,209,209,209,209,12,41,167,167,161,104,167,209,230,12,188,209,167,167,167,167,209,167,209,12,167,230,167,167,41,230,146,167,18,10,167,167,209,41,167,14,167,230,167,167,230,28,209,167,167,167,167,209,167,10,167,167,229,167,167,209,41,167,167,209,167]
    output_rewards =[0.7862923516547147,1.4689923071833202,1.7490021781757834,0.6961844675107318,0.6360390716519007,0.4551471708752704,0.8194170905780916,-1.0,0.1600962339695765,0.8798215889329953,0.9019771485528421,0.9716356455191582,0.6489192076237642,-1.0,0.6202905840492403,1.3468216103812398,1.4226127122287013,1.2255768816472963,1.3354203406724603,0.49177208966004776,-1.0,0.8005164696844551,0.3545038312276827,0.4230822139543758,-1.0,0.6580224652180273,0.597595603189138,1.1907542079527247,0.5591847278205527,0.9109333326454101,0.5098297235401221,0.7178030764619633,1.1165541047492156,0.5231144066772714,1.3963352126920485,-1.0,0.7565161669794348,1.2280506526849262,2.003629077573962,0.31924458057096505,0.0853763134586979,-1.0,2.5197301712478897,-1.0,-1.0,0.9220864142139379,-1.0,0.6870197384878727,-1.0,-1.0,-1.0,-1.0,-1.0,-1.0,2.7522862392787335,1.1070412407886154,0.6285815895029175,1.7063125229875853,-1.0,-1.0,0.6843930680075024,0.6426154109822232,0.5274174740651167,-1.0,0.6013666219434707,0.4729233466848354,0.9496961225820721,0.22039778945442995,-1.0,-1.0,0.996129229883067,1.1758210047160442,0.11903377319326978,1.7969808828702025,0.35041724180275285,-1.0,1.542951089930419,0.5147796120198417,0.46189611684512094,1.3198259936431391,-1.0,0.5203548269661669,1.0062069289748792,0.6592292383800429,0.5634987017872984,-1.0,0.31844260862892493,0.5809852044283361,-1.0,2.1175829665832695,0.6669640651472137,0.6967518583139518,0.46624434134893944,-1.0,0.6541880972513703,0.466468219394,0.6393704490969684,0.4308579591492813,0.8872729422902768,1.63450215496324]
    ouput_actions_candidates =[[[167,146,83,41,125,62,230,20,188,209,104,161,176,228,
115,35]],[[167,188,230,209,206,146,104,87,229,185,62,173,152,156,
131,219]],[[209,230,188,186,167,146,164,125,214,196,229,222,182,83,
224,187]],[[230,209,168,161,228,115,176,146,193,188,216,159,167,83,
149,174]],[[209,230,188,167,186,146,182,144,125,184,196,222,214,164,
212,83]],[[167,146,230,83,41,125,209,62,188,104,20,215,82,89,
152,219]],[[209,230,186,193,229,222,164,214,187,188,196,221,224,161,
226,180]],[[167,41,146,83,62,230,20,125,209,188,104,168,219,89,
161,111]],[[167,188,230,104,62,206,146,87,209,185,28,131,229,173,
219,152]],[[209,230,188,167,186,146,196,164,182,125,181,229,184,144,
41,83]],[[230,209,146,161,168,228,167,41,115,176,83,188,216,174,
220,159]],[[209,230,188,167,146,186,125,83,182,164,222,224,229,144,
212,184]],[[41,83,20,167,62,125,146,188,161,104,230,10,12,209,
176,35]],[[209,230,168,228,161,176,186,41,220,188,146,159,111,20,
189,115]],[[167,146,230,41,83,125,62,209,188,20,104,168,215,89,
82,152]],[[230,209,168,228,161,146,167,115,176,188,216,220,159,174,
41,83]],[[167,188,230,209,206,146,185,87,131,211,156,173,187,215,
229,202]],[[209,230,188,167,164,146,229,196,186,221,187,125,227,185,
181,211]],[[209,230,146,168,228,161,176,188,167,115,220,216,159,174,
83,186]],[[28,62,219,40,188,7,185,167,206,87,200,187,19,41,
93,15]],[[12,10,41,35,2,21,42,39,48,71,16,20,18,25,
161,14]],[[167,146,230,83,209,62,41,125,188,20,104,215,82,168,
89,152]],[[209,230,188,167,186,146,83,125,222,164,182,212,115,224,
184,229]],[[177,215,219,200,187,152,133,9,28,185,76,227,229,95,
110,40]],[[53,40,28,7,41,93,13,30,19,9,15,219,187,1,
32,38]],[[167,230,188,146,104,209,206,87,173,185,229,152,215,62,
131,219]],[[167,230,146,83,125,41,209,188,62,20,104,82,215,176,
115,89]],[[209,230,146,167,41,20,83,62,188,161,125,228,176,104,
168,115]],[[230,209,146,161,168,228,167,41,176,188,83,216,115,174,
159,220]],[[209,230,186,188,167,222,146,214,164,229,193,224,196,182,
125,115]],[[209,230,146,161,167,41,228,83,20,176,216,188,62,168,
174,115]],[[167,146,230,188,215,152,104,83,219,200,187,209,206,87,
125,135]],[[167,146,230,83,41,209,125,188,62,20,104,215,82,89,
219,152]],[[10,12,41,48,39,2,71,16,161,14,35,193,20,25,
77,121]],[[167,230,146,188,209,104,62,41,125,83,20,152,87,219,
173,215]],[[209,230,168,146,228,161,176,188,186,220,41,159,115,174,
189,216]],[[209,230,188,167,146,186,125,164,182,214,196,83,222,144,
229,224]],[[209,230,188,167,186,146,164,229,196,125,83,222,182,224,
212,221]],[[209,230,188,167,146,186,125,214,182,83,164,144,222,184,
224,196]],[[12,10,41,2,35,39,48,21,42,16,71,18,14,161,
25,20]],[[41,20,10,161,209,216,48,77,12,230,228,176,71,220,
2,35]],[[167,41,146,83,62,230,20,125,209,188,104,168,89,161,
219,111]],[[167,188,230,209,146,206,104,185,87,131,229,156,62,152,
173,211]],[[161,146,228,176,83,41,209,230,115,167,77,193,159,174,
168,71]],[[104,167,230,188,62,146,209,20,41,83,40,28,125,152,
215,229]],[[167,146,230,83,41,125,209,188,62,20,104,115,161,176,
165,168]],[[209,182,159,144,12,176,161,186,230,25,10,228,222,44,
193,71]],[[230,209,161,168,146,228,167,176,115,188,41,159,83,216,
174,111]],[[12,10,41,35,42,21,2,71,28,18,53,48,20,16,39,13]],[[188,167,62,28,104,219,40,185,41,206,230,87,146,7,
209,152]],[[209,230,146,228,188,168,161,176,186,220,41,167,216,159,
115,174]],[[167,83,146,41,20,125,230,62,188,104,209,28,161,40,
176,152]],[[167,188,230,209,206,146,185,87,131,211,202,156,187,173,
229,215]],[[167,230,146,188,104,209,62,83,125,20,41,152,87,215,
219,173]],[[167,188,230,146,209,206,104,87,229,185,62,156,173,131,
152,211]],[[209,230,186,188,222,146,167,214,224,182,193,144,115,228,
212,180]],[[167,146,230,83,41,125,188,209,62,20,104,115,82,176,
161,165]],[[209,230,168,228,146,176,188,161,115,220,159,186,167,214,
174,216]],[[12,10,18,2,35,53,21,42,48,14,71,13,16,0,28,41]],[[167,41,83,146,20,125,62,230,209,188,104,161,176,10,
12,35]],[[230,209,168,228,161,146,176,115,159,193,188,216,167,83,
111,41]],[[167,146,230,83,41,125,209,188,62,20,104,115,176,161,
165,82]],[[167,230,146,83,125,41,188,209,62,20,104,82,215,176,
115,89]],[[41,20,12,10,35,42,21,39,83,62,161,48,2,28,
18,25]],[[230,167,146,215,188,173,187,104,209,217,131,229,190,156,
223,166]],[[146,167,230,215,83,152,219,104,200,177,187,217,188,158,
28,173]],[[167,146,230,188,83,209,104,125,41,62,20,215,152,219,
87,28]],[[18,12,10,2,14,35,48,33,41,4,42,53,81,8,52,54]],[[10,12,41,2,71,35,16,48,39,21,25,161,42,18,
20,27]],[[167,146,83,41,230,125,62,20,188,209,104,161,176,115,
35,228]],[[167,188,230,209,146,206,185,87,173,211,131,215,156,202,
190,187]],[[209,230,168,228,161,146,176,188,115,220,159,167,216,174,
186,111]],[[41,167,230,209,146,20,62,83,188,125,104,228,161,176,
10,25]],[[167,188,230,209,206,185,146,87,131,211,229,187,156,173,
202,215]],[[14,18,10,4,12,48,2,39,33,77,8,41,42,193,
35,54]],[[167,230,146,41,125,62,83,188,209,20,104,152,215,219,
82,89]],[[230,209,146,167,168,228,161,188,83,115,176,41,20,220,
216,62]],[[167,230,146,83,125,41,209,188,62,20,104,82,176,115,
215,161]],[[167,188,230,209,206,146,185,87,104,229,131,62,173,156,
152,219]],[[230,209,146,168,167,228,161,188,176,115,216,41,174,83,
220,159]],[[28,7,40,53,15,19,41,30,219,13,93,110,1,181,
187,32]],[[209,230,146,167,41,161,228,83,20,216,188,168,176,62,
220,174]],[[167,188,230,146,104,209,62,125,87,152,206,229,185,20,
83,173]],[[167,230,146,83,125,41,209,188,62,20,104,82,215,115,
176,161]],[[167,146,230,83,125,41,188,209,62,20,104,82,215,89,
115,176]],[[167,146,83,41,230,125,188,20,62,104,209,152,215,28,
219,82]],[[209,230,41,146,20,161,167,228,83,216,62,176,188,220,
125,77]],[[167,230,146,188,104,209,83,125,215,62,41,20,152,217,
173,219]],[[10,12,41,161,20,16,48,71,2,25,35,176,111,21,
121,193]],[[167,146,230,83,209,41,62,125,188,20,104,168,115,161,
176,111]],[[167,188,230,209,206,185,146,87,229,131,173,156,62,104,
211,187]],[[229,206,187,185,164,215,221,204,133,177,211,190,87,223,
74,76]],[[167,146,230,83,125,41,188,62,209,20,104,82,176,89,
215,152]],[[167,146,83,230,41,188,20,125,104,62,209,152,215,219,
28,110]],[[209,230,193,186,222,229,164,221,161,196,224,214,187,226,
180,199]],[[41,146,20,83,167,62,125,230,209,188,161,10,104,228,
176,35]],[[167,188,230,209,206,185,146,87,131,229,156,173,104,211,
62,187]],[[167,188,230,209,146,104,62,206,87,229,185,152,156,125,
173,131]],[[209,230,146,188,167,222,83,193,176,182,186,125,170,224,
115,228]],[[167,188,230,209,206,146,185,87,104,229,131,62,173,156,152,219]]]
    best_actions =[230,146,230,230,146,230,230,20,146,22,230,230,62,20,209,230,230,230,230,41,0,188,230,188,0,230,230,188,230,230,172,230,230,20,230,62,212,230,230,8,167,20,230,0,0,230,41,230,0,64,84,0,20,0,209,230,230,230,0,0,230,230,230,0,230,230,230,62,0,214,230,230,125,230,126,0,230,230,188,230,0,230,146,230,230,0,210,230,0,188,209,230,230,0,230,195,209,167,230,230]
    best_rewards =[0.8994797512170104,1.4689923071833202,1.9847834327374847,0.6961844675107318,0.6360390716519007,0.5178373325841783,0.8770994054134181,0.11488650921405003,0.1600962339695765,1.3176772580795655,0.9019771485528421,1.1624067064916164,0.6523052061602428,7.3517835271972105,0.6726444941226085,1.3468216103812398,2.102652183345079,1.3254719161371433,1.472073170627088,0.6112778410937828,-1.0,0.8083995730811027,0.35502852947065855,0.5356424117315234,-1.0,0.7345647978749538,0.6929608502403356,1.1907542079527247,0.5591847278205527,0.9610261486749804,0.8676489101374093,0.8699057688155167,1.466078991258113,0.6649386440892414,1.9651783102728895,2.2919208248495324,0.9642523623538835,1.3189647648105798,2.2397070898028244,0.3563318094409098,0.10405534126567732,0.11823973784480318,5.198602492840953,-1.0,-1.0,1.1666308518450117,1.4814974126945908,0.6870197384878727,-1.0,2.9253026833191735,1.0284809949984957,-1.0,0.8656457772939445,-1.0,3.3816444019837224,1.1942229406297435,0.7586282791464232,1.9733078661843038,-1.0,-1.0,0.6843930680075024,0.766489460990894,0.6093652170932522,-1.0,0.6013666219434707,0.5337192233350525,1.2367909540021642,0.25219819600984716,-1.0,0.992418403496433,1.179718021376113,1.3005848681478116,0.12443753941333735,3.118144666518573,0.48230599529794155,-1.0,1.542951089930419,0.557852964247414,0.49005602405765863,1.3198259936431391,-1.0,0.5211723777251275,1.021589081489213,0.7654622588730279,0.6545298699815638,-1.0,0.324067691668722,0.6502876467181976,-1.0,2.2888726041955065,0.6829978489151056,0.9737067621460139,0.5038146862681129,-1.0,0.6785830330446285,0.4669351320339013,0.7062869813255703,0.4308579591492813,0.9368597075371765,2.0994027658180094]
    for candi_size in [16]:
        valid_case_num = 0
        match_case_num = 0
        unmatched_best_actions = []
        unmatched_best_actions_candidates = []
        for i in range(0, 100):
            if best_rewards[i] < 0.0:
                continue
            valid_case_num += 1
            if best_actions[i] in ouput_actions_candidates[i][0][:candi_size]:
                match_case_num += 1
            else:
                unmatched_best_actions.append(best_actions[i])
                unmatched_best_actions_candidates.append(ouput_actions_candidates[i][0][:candi_size])
        print('Candidate size: {}, success rate: {}'.format(candi_size, match_case_num / valid_case_num))
        print('Valid case num: {}, match case num: {}'.format(valid_case_num, match_case_num))
        print('Unmatched best actions: {}'.format(unmatched_best_actions))
        print('Unmatched best actions candidates: {}'.format(unmatched_best_actions_candidates))

