'''
Author: fujiawei0724
Date: 2022-05-21 16:56:43
LastEditors: fujiawei0724
LastEditTime: 2022-06-01 12:50:46
Description: analyze the test data in multiple metric. 
'''

import numpy as np

if __name__ == '__main__':
    output_actions =[209,167,167,191,167,209,230,167,191,209,167,209,167,188,125,188,14,167,167,209,188,167,188,125,209,209,167,167,209,191,188,209,188,188,188,167,167,209,191,209,14,188,167,188,209,209,167,230,20,188,209,230,188,188,209,188,167,209,14,14,209,167,188,167,209,167,167,209,125,167,191,167,209,188,230,188,167,14,188,20,14,188,209,188,125,209,209,167,167,188,209,188,230,167,230,125,209,20,167,188]
    output_rewards =[0.6585001543977127,0.41719812914856524,-1.0,0.7504419790651485,0.2941481819215688,1.1277225038277972,0.3991536820453377,-1.0,0.41374303690979447,0.9983357736196738,-1.0,0.9455567906676684,-1.0,3.8757568273463554,-1.0,-1.0,0.7022753629600959,0.3315901666513989,-1.0,1.3850978548083157,0.8270163078719135,-1.0,1.4006625798129997,0.4466601674220615,1.219932850018725,0.6642490734195462,-1.0,-1.0,1.6778134689483089,0.396576155215387,-1.0,0.33186408436341974,5.687349202929066,-1.0,0.8339983029864332,0.7625635719002699,-1.0,0.8149005254741828,0.18143760935193903,0.8473485788273604,0.4201449314780655,0.7146458961815435,1.2439208651149596,0.6265099079768154,5.532726458960297,7.688466964302206,0.29834663677860296,0.4122336012269618,0.38708344576534776,1.2953015176209022,0.7891408317039627,6.43579318040046,1.0453331597792783,0.7570374004526159,0.5531342317509799,0.5206482957549644,1.1710113861445637,0.6845950936472428,0.6513307015792379,0.34534013271082425,0.7100929091377723,0.7085191921608968,1.0914383356463044,-1.0,11.51877668368612,0.7906359670578762,-1.0,-1.0,0.5324873859664989,1.1900029722195176,0.5263571103057344,0.97749905154282,0.6172661602917329,0.6605666841109009,-1.0,-1.0,-1.0,0.4598919965676895,-1.0,2.5238906380063457,0.1082695380805426,-1.0,0.8474661996605728,0.9576350244723679,0.5160147647729424,-1.0,-1.0,0.5146533286193353,0.7198680832770612,2.7711478190770378,0.7534159296980439,2.6952866912654168,0.6183128753549608,-1.0,2.0732940991586215,-1.0,1.9196139375474313,-1.0,-1.0,0.7583914319625028]
    ouput_actions_candidates =[[[209,191,140,138,195,14,125,230,199,83,151,123,167,81,
182,214]],[[167,125,83,188,209,230,62,146,20,41,104,57,221,148,
30,181]],[[167,125,83,230,209,62,146,188,104,41,20,52,151,14,
193,65]],[[191,14,140,138,209,195,83,174,125,199,123,48,81,151,
130,230]],[[167,20,125,188,83,62,209,146,230,41,104,42,39,136,
81,48]],[[209,191,138,14,140,125,195,83,199,230,174,167,151,161,
226,188]],[[230,209,167,188,146,62,166,221,200,179,190,206,198,135,
125,181]],[[167,83,125,20,188,209,62,230,146,41,14,104,48,39,
52,193]],[[191,209,125,83,14,138,140,230,174,195,199,161,123,226,
167,188]],[[209,230,167,188,146,62,125,166,41,138,205,200,224,144,
201,190]],[[167,83,125,209,188,230,62,20,146,41,104,52,42,57,
14,48]],[[209,230,167,188,146,62,125,41,166,138,200,205,224,201,
190,135]],[[167,125,83,230,209,62,146,188,104,41,20,52,193,14,
151,174]],[[188,167,223,146,198,229,230,177,221,179,175,200,129,190,
208,166]],[[125,167,83,230,209,146,62,188,14,104,52,193,41,20,
174,123]],[[188,167,129,229,146,198,213,143,177,223,217,145,179,221,
181,166]],[[14,209,81,48,140,20,191,113,42,39,125,83,167,138,
52,195]],[[167,188,125,83,146,209,230,62,20,41,104,57,143,225,
148,145]],[[167,83,125,209,230,62,146,188,104,20,41,14,193,52,
151,140]],[[209,230,167,188,62,146,125,41,138,205,224,166,201,144,
189,178]],[[188,167,223,177,179,221,198,229,146,129,190,230,175,166,
200,208]],[[167,125,83,230,209,62,188,146,104,41,20,148,221,52,
55,32]],[[188,167,146,177,223,229,198,213,221,230,179,143,175,145,
148,190]],[[125,83,191,14,209,138,230,174,140,123,167,199,195,161,
149,226]],[[209,191,125,83,138,14,230,140,167,199,123,195,151,174,
188,161]],[[209,230,188,167,146,62,166,125,200,41,221,135,138,190,
83,198]],[[167,125,83,230,209,62,146,188,104,41,20,52,193,14,
151,65]],[[167,125,83,230,209,62,188,146,104,20,41,148,221,55,
32,64]],[[209,230,167,188,62,146,125,41,166,138,200,205,190,224,
135,206]],[[191,209,14,83,125,138,140,195,199,174,230,161,123,226,
167,188]],[[188,167,146,230,125,83,209,177,148,62,41,213,221,143,
198,145]],[[209,14,83,191,125,167,140,48,81,20,230,138,113,42,
188,199]],[[188,167,223,229,177,198,146,129,179,221,230,200,175,190,
166,213]],[[188,217,143,167,225,30,146,7,57,145,129,20,40,213,
198,13]],[[188,167,146,177,223,213,229,221,198,175,190,143,230,179,
166,145]],[[167,125,83,230,209,62,146,188,104,41,20,148,221,55,
64,183]],[[167,230,125,83,188,146,209,62,41,104,20,148,213,183,
55,127]],[[209,230,138,140,188,42,189,83,191,224,128,176,182,98,
199,4]],[[191,138,140,195,209,14,81,42,136,163,199,48,174,189,
182,2]],[[209,191,138,140,195,14,199,230,125,174,182,81,83,214,
48,136]],[[14,20,39,81,48,52,113,23,140,42,56,2,193,125,
88,136]],[[188,167,146,223,177,213,221,229,198,175,190,179,166,230,
143,208]],[[167,125,83,230,209,62,146,188,104,20,41,148,52,151,
221,55]],[[188,167,146,177,213,223,198,221,229,175,230,143,148,166,
145,190]],[[209,230,167,188,146,62,125,166,41,135,221,200,190,185,
206,198]],[[209,230,167,188,62,146,125,41,138,205,224,166,200,144,
185,181]],[[167,125,83,230,209,188,146,62,20,41,104,221,30,52,
57,14]],[[230,188,209,221,167,135,229,166,198,125,190,146,208,200,
223,175]],[[20,14,39,81,113,42,48,209,167,125,140,52,23,56,
83,193]],[[188,167,177,223,146,229,213,221,129,190,198,179,143,145,
175,217]],[[209,230,188,167,62,146,138,125,224,189,210,83,117,41,
144,191]],[[230,209,167,188,146,166,179,221,200,190,135,198,206,185,
208,62]],[[188,167,177,146,223,229,213,221,129,190,198,143,217,179,
166,145]],[[188,167,146,177,213,223,221,229,198,175,190,143,230,166,
160,179]],[[209,230,188,138,167,140,224,42,189,146,191,210,182,83,
48,98]],[[188,167,177,223,229,146,213,221,190,129,198,179,166,143,
175,145]],[[167,83,125,188,209,230,146,62,20,41,104,57,148,30,
221,225]],[[209,230,167,188,62,146,125,41,138,166,224,200,205,144,
181,135]],[[14,191,140,209,138,195,48,81,83,199,42,125,174,123,
167,136]],[[14,48,81,191,140,113,20,39,83,42,125,52,88,195,
138,56]],[[209,230,167,188,146,62,41,166,125,138,200,205,201,190,
224,135]],[[167,125,83,209,188,230,62,146,20,41,104,52,14,48,
42,136]],[[188,167,146,177,213,198,230,229,221,143,145,223,148,175,
179,217]],[[167,125,83,230,209,62,146,188,104,41,20,52,148,221,
183,151]],[[209,230,167,188,62,146,125,166,41,200,135,185,221,181,
190,198]],[[167,125,83,230,209,62,146,188,104,20,41,52,221,151,
148,55]],[[167,125,83,230,209,62,188,146,104,20,41,148,221,55,
64,183]],[[209,230,167,188,62,146,125,166,41,138,200,221,135,224,
205,83]],[[125,209,83,191,14,138,230,167,123,140,174,199,193,161,
188,195]],[[167,125,83,230,209,62,146,188,104,20,41,148,221,55,
32,64]],[[191,209,138,14,125,140,83,195,174,230,199,161,226,151,
126,188]],[[167,83,125,230,209,188,146,62,20,41,104,52,221,14,
57,30]],[[209,230,188,166,167,146,200,62,41,125,221,83,135,229,
190,198]],[[188,167,146,213,177,229,223,221,198,143,230,145,175,148,
179,190]],[[230,167,188,209,146,83,125,62,229,198,41,221,200,164,
177,183]],[[188,167,146,125,230,229,83,143,177,198,221,209,223,145,
129,213]],[[167,83,125,209,230,188,62,146,20,41,104,52,14,48,
42,151]],[[14,209,191,83,140,125,167,48,138,81,230,123,113,199,
195,188]],[[188,167,146,230,83,177,125,213,148,217,198,143,127,30,
221,209]],[[20,14,39,125,52,81,23,48,42,167,113,56,83,2,
188,193]],[[14,191,140,48,81,195,138,136,42,52,39,56,199,83,
113,174]],[[188,167,146,125,83,230,209,20,62,41,143,145,198,221,
229,148]],[[209,191,138,140,195,230,199,182,14,214,125,81,136,42,
172,174]],[[188,167,146,230,198,223,229,209,177,221,129,179,175,200,
145,143]],[[125,83,191,209,14,167,230,138,123,174,140,199,193,149,
188,161]],[[209,230,83,138,199,176,128,98,4,140,170,228,222,41,
189,210]],[[209,167,83,125,230,188,20,14,62,140,146,191,48,113,
42,81]],[[167,125,83,230,209,62,146,188,104,41,20,52,193,14,
151,65]],[[167,125,83,230,209,62,146,188,104,41,20,221,148,55,
64,30]],[[188,167,223,177,146,229,198,221,179,129,190,175,213,230,
166,200]],[[209,230,167,188,146,62,166,125,200,41,138,221,135,190,
198,206]],[[188,167,223,146,177,229,198,221,230,179,190,175,129,213,
200,208]],[[230,209,167,188,62,146,125,41,166,135,221,200,185,190,
181,206]],[[167,83,125,209,188,230,62,146,20,41,104,52,57,148,
14,221]],[[230,209,167,188,146,198,229,221,166,200,190,179,223,208,
206,135]],[[125,83,167,209,230,191,14,146,188,138,123,174,199,193,
140,52]],[[209,230,167,188,146,62,41,125,138,205,166,224,200,201,
190,144]],[[20,39,23,42,81,52,14,125,2,113,48,167,56,136,
10,188]],[[167,125,188,83,20,146,209,230,62,41,104,30,57,145,
19,13]],[[188,167,146,177,223,229,213,198,221,230,175,179,190,129,
145,143]]]
    best_actions =[188,146,0,230,83,230,169,104,230,230,0,230,0,209,230,104,84,83,0,230,194,0,230,230,230,230,0,0,230,230,0,125,167,104,230,230,0,230,167,209,146,230,230,230,230,188,230,230,41,230,230,230,230,230,230,230,125,209,209,167,230,20,230,0,209,230,0,83,230,230,230,188,230,230,0,0,62,168,0,104,188,0,151,188,230,0,83,230,230,230,230,230,218,104,230,0,230,0,0,230]
    best_rewards =[0.6585001543977127,0.41719812914856524,-1.0,1.9398866085289423,0.2941481819215688,1.2227055245472513,0.49890108797338817,0.5049573324521187,0.6732768670112484,1.046354348486493,-1.0,1.0090526264427497,-1.0,5.208191831049558,0.662316218940452,0.48797233585975736,1.9169917973569188,0.3315901666513989,-1.0,1.5426643004436362,1.0808947145253496,-1.0,1.864444160526234,0.5645136280027485,1.325758187207294,0.6933584822919302,-1.0,-1.0,1.8755114816707403,0.665724882970368,-1.0,0.33186408436341974,5.687349202929066,0.36005099053956324,0.948168845530597,0.9520462374536827,-1.0,0.8478895721490847,0.1918819923424282,0.8473485788273604,0.684906841694748,0.7799511400892857,1.8445705383818543,0.7032138570888631,5.644019663240909,7.688466964302206,0.33574387570754,0.4122336012269618,0.4087870475312712,1.5041847464852833,0.8237859715647176,6.43579318040046,1.1678723062511471,0.8531540493776762,0.5690208393435205,0.568664456886423,1.1710113861445637,0.6845950936472428,2.225059904251577,0.5436966303282199,0.7473493471181633,0.7139024887057884,1.2818754637913068,-1.0,11.51877668368612,0.7935358224847685,-1.0,0.7451170115061476,0.6507635482688942,1.4601751081499765,0.9000442325678285,0.9806082467117363,0.6415929021487903,0.7279856872003057,-1.0,-1.0,3.2818480811002306,0.7492072764961175,-1.0,10.695821993140614,0.14464631397026698,-1.0,1.0455256017275318,0.9576350244723679,0.6584183597885095,-1.0,0.5960964413772158,0.554020089420693,0.8073983839498303,4.04203504650097,0.7889211272791713,4.15518137776462,0.8863697361545476,16.28178268588763,2.0732940991586215,-1.0,2.274726724447505,-1.0,-1.0,0.8190251927193303]

    for candi_size in [16]:
        valid_case_num = 0
        match_case_num = 0
        unmatched_best_actions = []
        unmatched_best_actions_candidates = []
        for i in range(0, 100):
            if best_rewards[i] < 0.0:
                continue
            valid_case_num += 1
            if best_actions[i] in ouput_actions_candidates[i][0][:candi_size]:
                match_case_num += 1
            else:
                unmatched_best_actions.append(best_actions[i])
                unmatched_best_actions_candidates.append(ouput_actions_candidates[i][0][:candi_size])
        print('Candidate size: {}, success rate: {}'.format(candi_size, match_case_num / valid_case_num))
        print('Valid case num: {}, match case num: {}'.format(valid_case_num, match_case_num))
        print('Unmatched best actions: {}'.format(unmatched_best_actions))
        print('Unmatched best actions candidates: {}'.format(unmatched_best_actions_candidates))

